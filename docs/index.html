<!DOCTYPE html>
<html lang="en">
<head>
    <title>Eucalypt</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
  <script type="module">function E(e){if(e==null||e instanceof Function)return e;const t=typeof e;return t==="string"?(n,r)=>_(n,e,r):t==="object"?(n,r)=>_(e,n,r):e}function gt(e,t,n,...r){if(r.length%2!==0)throw new Error("Illegal argument: assoc expects an odd number of arguments.");switch(q(e)){case P:e.set(t,n);for(let o=0;o<r.length;o+=2)e.set(r[o],r[o+1]);break;case U:case Y:e[t]=n;for(let o=0;o<r.length;o+=2)e[r[o]]=r[o+1];break;default:throw new Error(`Illegal argument: assoc! expects a Map, Array, or Object as the first argument, but got ${typeof e}.`)}return e}function je(e){switch(q(e)){case P:return new Map(e);case V:return new e.constructor(e);case U:return[...e];case Y:return{...e};default:throw new Error(`Don't know how to copy object of type ${typeof e}.`)}}function w(e,t,n,...r){e||(e={});const o=je(e);return gt(o,t,n,...r),o}const P=1,U=2,Y=3,Se=4,V=5,Xe=6;function Je(e){switch(e){case P:return new Map;case U:return[];case Y:return{};case Se:return new Re;case V:return new Set;case Xe:return G(function*(){})}}function ke(e){return e.constructor===Object}function Vt(e){return e!=null&&ke(e)}function q(e){if(e!=null){if(ke(e))return Y;if(e instanceof Map)return P;if(e instanceof Set)return V;if(e instanceof Re)return Se;if(Array.isArray(e))return U;if(e instanceof et)return Xe;if(e instanceof Ne)return V;if(e instanceof Object)return Y}}function Xt(e,t,n,r,o){r=O(r);const s=q(n);if(s!==P&&s!==U&&s!==Y)throw new Error(`Illegal argument: ${t} expects the first argument to be a Map, Array, or Object.`);const c=[n];let u=n;for(let a=0;a<r.length-1;a+=1){const l=r[a];let f;u instanceof Map?f=u.get(l):f=u[l],f||(f=Je(s)),c.push(f),u=f}c.push(o);for(let a=c.length-2;a>=0;a-=1)c[a]=e(c[a],r[a],c[a+1]);return c[0]}function _e(e,t,n){return Xt(w,"assoc-in",e,t,n)}function Jt(...e){if(e=e.map(E),e.length===0)return ne;if(e.length===1)return e[0];const[t,...n]=e.slice().reverse();return function(...r){let o=t(...r);for(const s of n)o=s(o);return o}}function vt(e,t){for(const n of t)e.add(n);return e}function yt(...e){if(e.length===0)return kt();const[t,...n]=e;let r=t;switch(r==null&&(r=[]),q(r)){case V:vt(r,n);break;case Se:r.unshift(...n.reverse());break;case U:r.push(...n);break;case P:for(const o of n)Array.isArray(o)?r.set(o[0],o[1]):p(o).forEach(s=>{r.set(s[0],s[1])});break;case Y:for(const o of n)Array.isArray(o)?r[o[0]]=o[1]:Object.assign(r,o);break;default:throw new Error("Illegal argument: conj! expects a Set, Array, List, Map, or Object as the first argument.")}return r}function Ie(...e){if(e.length===0)return kt();const[t,...n]=e;let r=t;r==null&&(r=un());let o,s;switch(q(r)){case V:return r instanceof Ne?vt(new r.constructor(r),n):new r.constructor([...r,...n]);case Se:return new Re(...n.reverse(),...r);case U:return[...r,...n];case P:o=new Map(r);for(const c of n)Array.isArray(c)?o.set(c[0],c[1]):p(c).forEach(u=>{o.set(u[0],u[1])});return o;case Xe:return G(function*(){yield*n,yield*r});case Y:s={...r};for(const c of n)Array.isArray(c)?s[c[0]]=c[1]:Object.assign(s,c);return s;default:throw new Error("Illegal argument: conj expects a Set, Array, List, Map, or Object as the first argument.")}}function fe(e,t){switch(q(e)){case V:case P:return e.has(t);case void 0:return!1;default:return t in e}}function de(e,...t){if(t.length===0)return e;const n=je(e);switch(q(e)){case P:for(const r of t)n.delete(r);break;default:for(const r of t)delete n[r];break}return n}function Oe(e){return e+1}function Zt(e){return e-1}function A(e,t,n){if(e){var r=void 0;if(Array.isArray(e))r=e[t];else{const o=p(e);let s=0;for(const c of o)if(s++==t){r=c;break}}if(r!==void 0)return r}return n}function _(e,t,n=void 0){if(e==null)return n;let r;if(ke(e))return r=e[t],r===void 0?n:r;let o;switch(q(e)){case V:e.has(t)&&(r=t);break;case P:r=e.get(t);break;case U:r=e[t];break;default:if(o=e.get,o instanceof Function)try{r=e.get(t);break}catch{}r=e[t];break}return r!==void 0?r:n}function Ze(e){return e!=null&&!!e[Symbol.iterator]}const te=Ze;function en(e){return e==null||!!e[Symbol.iterator]}function p(e){if(e==null)return[];if(en(e))return e;if(e instanceof Object)return Object.entries(e);throw new TypeError(`${e} is not iterable`)}const wt=Symbol("Iterable"),tn=Symbol.iterator;function bt(e){return e[Symbol.iterator]()}const nn=bt;function R(e){if(e==null)return e;const t=p(e);return t.length===0||t.size===0||t[Symbol.iterator]().next().done?null:t}function b(e){const[t]=p(e);return t}function De(e){const[t,n]=p(e);return n}function K(e){return G(function*(){let t=!0;for(const n of p(e))t?t=!1:yield n})}class $e{value;constructor(t){this.value=t}_deref(){return this.value}}function rn(e){return e instanceof $e}function At(e,t,n){e=E(e);let r,o;if(arguments.length===2){const s=p(t)[Symbol.iterator](),c=s.next();c.done?o=e():o=c.value,r=s}else o=t,r=p(n);if(o instanceof $e)return o.value;for(const s of r)if(o=e(o,s),o instanceof $e){o=o.value;break}return o}var on=!1;class et{constructor(t){this.gen=t,this.usages=0}[Symbol.iterator](){return this.usages++,this.usages>=2,this.gen()}}et.prototype[wt]=!0;function G(e){return new et(e)}function ce(e,...t){switch(e=E(e),t.length){case 0:return n=>(...r)=>{switch(r.length){case 0:return n();case 1:return n(r[0]);case 2:return n(r[0],e(r[1]));default:return n(r[0],e(...r.slice(1)))}};case 1:return G(function*(){for(const n of p(t[0]))yield e(n)});default:return G(function*(){const n=t.map(r=>nn(p(r)));for(;;){const r=[];for(const o of n){const s=o.next();if(s.done)return;r.push(s.value)}yield e(...r)}})}}function Tt(e){return t=>(...n)=>{switch(n.length){case 0:return t();case 1:return t(n[0]);case 2:{const r=n[0],o=n[1];return i(e(o))?t(r,o):r}}}}function Ke(e,t){return arguments.length===1?Tt(e):(e=E(e),G(function*(){for(const n of p(t))i(e(n))&&(yield n)}))}function z(e,t){return arguments.length===1?Tt(Ue(e)):Ke(Ue(e),t)}function sn(e){return t=>{let n=-1;return(...r)=>{switch(r.length){case 0:return t();case 1:return t(r[0]);case 2:return t(r[0],e((n=n+1,n),r[1]))}}}}function ut(e,t){if(e=E(e),arguments.length===1)return sn(e);const n=[];let r=0;for(const o of p(t))n.push(e(r,o)),r++;return n}function S(...e){return e.join("")}function I(e){return!i(e)}function oe(e){return e==null}class cn{constructor(t){this.val=t,this._watches={},this._deref=()=>this.val,this._hasWatches=!1,this._reset_BANG_=n=>{const r=this.val;if(this.val=n,this._hasWatches)for(const o of Object.entries(this._watches)){const s=o[0],c=o[1];c(s,this,r,n)}return n},this._add_watch=(n,r)=>{this._watches[n]=r,this._hasWatches=!0},this._remove_watch=n=>{delete this._watches[n]}}}function jt(e){return new cn(e)}function m(e){return e._deref()}function j(e,t){e._reset_BANG_(t)}function y(e,t,...n){t=E(t);const r=t(m(e),...n);return j(e,r),r}function St(e,t,n){return G(function*(){let r=e,o=t,s=n;t===void 0&&(r=0,o=e);let c=r||0;s=1;const u=s>=0;for(;o===void 0||u&&c<o||!u&&o<c;)yield c,c+=s})}function qe(e,t){if(N(t)){const n=e.exec(t);return n!=null?n.length===1?n[0]:[...n]:null}else throw new TypeError("re-find must match against a string.")}function kt(...e){return e}function x(e){return q(e)===U}function Fe(...e){if(e.length===2){const[r,o]=e,s=p(o);if(Array.isArray(s)){const c=new Array(s.length);for(var t=0;t<s.length;t++)c[t]=r(s[t]);return c}else{var n=[];for(const c of s)n.push(r(c));return n}}return[...ce(...e)]}function O(e){return an(e)?e:[...p(e)]}function Ee(e){return new Set(p(e))}const It=Symbol("IApply__apply");function Me(e,...t){e=E(e);const n=t.slice(0,t.length-1),r=p(t[t.length-1]),o=e[It];return o?o(...n,r):e(...n,...r)}function Ue(e){return e=E(e),(...t)=>I(e(...t))}class Re extends Array{constructor(...t){super(),this.push(...t)}}function un(...e){return new Re(...e)}function an(e){return Array.isArray(e)}function Ot(e){return G(function*(){for(const t of e)yield*p(t)})}function tt(...e){return Ot(e)}tt[It]=e=>Ot(e);function ne(e){return e}function ln(e,t){const n=q(e),r=Je(n)||{};for(const o of t){const s=_(e,o);s!=null&&gt(r,o,s)}return r}function fn(e){return rn(e)?m(e):e}function _n(e){return t=>{let n=[];return(...r)=>{let o,s;switch(r.length){case 0:return t();case 1:return o=r[0],n.length!==0&&(s=[...n],n=[],o=fn(t(o,s))),t(o);case 2:return o=r[0],n.push(r[1]),e===n.length?(s=[...n],n=[],t(o,s)):o}}}}function dn(e,...t){if(arguments.length===1)return _n(e);let n=e,r=t[0];return t.length===2&&([n,r]=t),hn(e,n,[],r,!0)}function hn(e,t,n,r,o){return G(function*(){let s=[],c=0;for(const u of p(r))c<e&&(s.push(u),s.length===e&&(yield s,s=t<e?s.slice(t):[])),c++,c===t&&(c=0);s.length>0&&(s.length===e||o)&&(yield s)})}function nt(e){const t=q(e);if(t!=null)return Je(t);throw new Error(`Can't create empty of ${typeof e}`)}function Qe(...e){const t=e[0];let n;return t==null?n={}:n=M(nt(t),t),yt(n,...e.slice(1))}function M(...e){let t,n,r,o,s;switch(e.length){case 0:return[];case 1:return e[0];case 2:return Ie(e[0]??[],...p(e[1]));case 3:return t=e[0],n=e[1],r=e[2],o=je(t),s=(c,u)=>u===void 0?c:yt(c,u),Nt(n,s,o,r);default:throw TypeError(`Invalid arity call of into: ${e.length}`)}}function pn(...e){if(e.length==0||e.length>2)throw new Error(`Invalid arity: ${e.length}`);return{[wt]:!0,[tn]:e.length==1?function*(){const t=e[0];for(;;)yield t}:function*(){const[t,n]=e;for(var r=0;r<t;r++)yield n}}}function mn(e){return t=>{let n=e;return(...r)=>{const o=r.length;if(o===0)return t();if(o===1)return t(r[0]);if(o===2){const s=r[0],c=r[1],u=n;return n--,u>0?s:t(s,c)}}}}function gn(e,t){return arguments.length===1?mn(e):G(function*(){const n=bt(p(t));for(let r=0;r<e;r++)n.next();yield*n})}function Ge(e,t,n,...r){return n=E(n),w(e,t,n(_(e,t),...r))}function Et(e,t,n){let r=e;for(const o of t)r=_(r,o);return r===void 0?n:r}function vn(e,t,n,...r){return n=E(n),_e(e,t,n(Et(e,t),...r))}function yn(e,t){e=E(e);for(const n of p(t))if(!e(n))return!1;return!0}function Mt(e,t){return arguments.length===1&&(t=e,e=void 0),e=E(e),t=p(t),[...t].sort(e||he)}function wn(e){return e===he?e:(t,n)=>{const r=e(t,n);return Rt(r)?r:r?-1:e(n,t)?1:0}}function bn(e,t,n){return arguments.length===2&&(n=t,t=he),e=E(e),t=E(t),Mt((r,o)=>{const s=wn(t),c=e(r),u=e(o);return s(c,u)},n)}function An(e,t){e=E(e);for(const n of p(t)){const r=e(n);if(i(r))return r}}function we(e){return!R(e)}function Z(e){if(!e)return 0;const t=e.length||e.size;if(typeof t=="number")return t;let n=0;for(const r of p(e))n++;return n}function H(e){return e!=null}function Tn(e,t,...n){return t==null?e:Math.min(e,t,...n)}function X(e){return e==null?!1:!!(ke(e)||e instanceof Map)}function ee(e){if(Array.isArray(e)){const t=e.slice(1);return t.length>0?t:null}else return R(K(e))}function he(e,t){if(e===t)return 0;{if(e==null)return-1;if(t==null)return 1;const n=typeof e,r=typeof t;if(n==="number"&&r==="number"||n==="string"&&r==="string")return e===t?0:e<t?-1:1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length<t.length)return-1;if(e.length>t.length)return 1;for(let o=0;o<e.length;o++){let s=he(e[o],t[o]);if(s!=0)return s}return 0}else throw new Error(`comparing ${n} to ${r}`)}}function i(e){return e!=null&&e!==!1}function se(e){return typeof e=="function"}function Rt(e){return typeof e=="number"}function jn(e){return e?Object.values(e):null}function N(e){return typeof e=="string"}const Gt=Symbol("meta");function be(e){return e instanceof Object?e[Gt]:null}function Sn(e,t){const n=je(e);return n[Gt]=t,n}function kn(e){return e===!0||e===!1}function Nt(e,...t){switch(t.length){case 2:{const n=t[0],r=t[1];return Nt(e,n,n(),r)}default:{let n=t[0];const r=t[1],o=t[2];n=e(n);const s=At(n,r,o);return n(s)}}}class Ne{constructor(t){t instanceof Ne||(t=Mt(t));const r=new Set(t);this._elts=[...r],this._set=r}add(t){if(this._set.has(t))return this;const n=this._elts;let r=!1;for(let o=0;o<n.length;o++)if(he(t,n[o])<=0){n.splice(o,0,t),r=!0;break}return r?this._set=new Set(n):(n.push(t),this._set.add(t)),this.size=n.length,this}delete(t){if(!this._set.has(t))return this;const n=this._elts,r=n.indexOf(t);return n.splice(r,1),this._set=new Set(n),this.size=n.length,this}has(t){return this._set.has(t)}keys(){return this.values()}values(){return this._elts[Symbol.iterator]()}entries(){return this._set.entries()}forEach(...t){return this.set.forEach(...t)}clear(){this._elts=[],this._set=new Set(this._elts)}[Symbol.iterator](){return this.keys()}}function Ct(){return crypto.randomUUID()}function D(e,t,...n){if(t===void 0||e===t)return!1;for(const r of n)if(e===r)return!1;return!0}const In=`# Eucalypt

Eucalypt is a frontend library for [Squint ClojureScript](https://github.com/squint-cljs/squint).
It replaces [Reagent & React](https://reagent-project.github.io/) with a compatible-ish subset of the Reagent API.
It supports form-1 and form-2 Reagent components.

The goal is to build very small frontend artifacts (~10k) using "Reagent" and "ClojureScript" (if you squint hard enough).
It's suitable for small pieces of one-off frontend code that do something simple, not large production web apps.
The examples from the Reagent homepage have been ported and work with Eucalypt.
Eucalypt is itself very small and fits in a single cljs file.

\x3C!-- end-about -->

- **[Try the demo](https://chr15m.github.io/eucalypt/)** - a single HTML file artifact gzipped to ~16k.
- [See the demo source code for examples](https://github.com/chr15m/eucalypt/tree/main/src/demo/).
- [![Latest test Results](https://raw.githubusercontent.com/chr15m/eucalypt/build/test-badge.svg)](https://github.com/chr15m/eucalypt/blob/build/test-results.md) [Tests source code](https://github.com/chr15m/eucalypt/tree/main/src/test/src/)

[Use](#use) | [Bugs](#bugs) | [Gotchas](#gotchas) | [Dev](#dev) | [Tests](#tests) | [Build](#build) | [Use of AI](#use-of-ai) | [Mr Clean](#mr-clean-original-readme)

## Use

Install with npm:

\`\`\`shell
npm i eucalypt
\`\`\`

Use it in your Squint cljs script like this:

\`\`\`clojure
(ns my-app
  (:require
    [eucalypt :as r]))

(defonce state (r/atom {}))

(defn component:main [state]
  [:<>
    [:p "Hello world!"]
    [:pre (pr-str @state)]])

(r/render
  [component:main state]
  (js/document.getElementById "app"))
\`\`\`

#### Use in JavaScript

Thanks to @borkdude for [this example](https://codepen.io/borkdude/pen/OPMNvwa).

\`\`\`javascript
import { render, atom } from "https://esm.sh/eucalypt";
import { deref, swap_BANG_, update_in } from "https://esm.sh/squint-cljs/core.js";

const swap = swap_BANG_;

const state = atom({counter: 0});

function myComponent () {
 return ["<>",
          ["div", "Hello world"],
          ["div", "Counter: ", deref(state).counter],
          ["button", {"on-click": () => {
            console.log('clock')
            swap(state, update_in, ["counter"], (x) => x + 1);           
            }
          }, "inc"]
        ];
}

render([myComponent], document.getElementById("app"))
\`\`\`

## Bugs

If you find an example form-1 or form-2 component that works in Reagent but doesn't work with Eucalypt, please create a failing test case in the \`tests/src\` folder, and raise a PR.

## Gotchas

Eucalypt gotchas:

- Not currently reentrant. State is shared globally.
- The only well-tested API is \`r/atom\` and \`r/render\`.
- Lots and lots of other weirdness and edge cases for sure.
- [It's slop code](#use-of-ai).

Some things to watch out for when using Squint, which I ran into building this:

- Keywords are just strings. No \`keyword?\`, \`name\` etc.
- No \`binding\`.
- No \`sorted-hashmap\`.
- \`(get {} :a)\` evaluates to \`undefined\` not \`nil\` which can break \`assoc\`, \`update\` and friends on \`nil\`.

## Dev

\`\`\`shell
pnpm i
npm run dev
\`\`\`

## Tests

\`\`\`shell
npm run test
\`\`\`

## Build

\`\`\`shell
npm run build
\`\`\`

## Use of AI

Eucalypt is a fork of [Mr Clean](https://bitbucket.org/sonwh98/mr-clean/) that has been slop-coded with AI into compiling with Squint.

Slop-coded means this library was built by 1. creating failing test cases 2. using an LLM to fix the code until all tests pass.
If you're uncomfortable with this method of development, which involves less human oversight, then you may not want to use this library.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED.

What's with the name? Eucalyptus oil (sometimes used in cleaning) looks like a reagent if you squint hard enough.

---

## Mr Clean (original README)

Mr Clean is a Reagent compatible ClojureScript library without dependency on React.js. At the heart of React.js
is a very simple idea GUI = function(data). Reagent takes this idea even further hiccup = function(data).  The
advantage of using Mr Clean over Reagent is that the generated javascript of a hello-world app is half
the size of that of reagent.

There is no diffing of virtual DOM. The state of components is flushed to the DOM when data changes. 

### What works?

Ractive atoms and cursors work as expected which are the important parts making components reactive to data changes. 
form 1, form 2 components are fully supported.

### What doesn't work?

None of the reagent macros are implemented. r/reaction is not a macro but a function that returns an atom holding the result of evaluating a function.

form 3 components are not fully supported because not all lifecycle methods are implemented.

`,On=Object.freeze(Object.defineProperty({__proto__:null,default:In},Symbol.toStringTag,{value:"Module"}));function En(){}function at(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function lt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Mn="[object RegExp]",Rn="[object String]",Gn="[object Number]",Nn="[object Boolean]",ft="[object Arguments]",Cn="[object Symbol]",qn="[object Date]",Bn="[object Map]",xn="[object Set]",zn="[object Array]",Pn="[object Function]",Ln="[object ArrayBuffer]",Be="[object Object]",Dn="[object Error]",$n="[object DataView]",Kn="[object Uint8Array]",Fn="[object Uint8ClampedArray]",Un="[object Uint16Array]",Qn="[object Uint32Array]",Hn="[object BigUint64Array]",Wn="[object Int8Array]",Yn="[object Int16Array]",Vn="[object Int32Array]",Xn="[object BigInt64Array]",Jn="[object Float32Array]",Zn="[object Float64Array]";function _t(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function er(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function tr(e,t,n){return ue(e,t,void 0,void 0,void 0,void 0,n)}function ue(e,t,n,r,o,s,c){const u=c(e,t,n,r,o,s);if(u!==void 0)return u;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return le(e,t,s,c)}return le(e,t,s,c)}function le(e,t,n,r){if(Object.is(e,t))return!0;let o=lt(e),s=lt(t);if(o===ft&&(o=Be),s===ft&&(s=Be),o!==s)return!1;switch(o){case Rn:return e.toString()===t.toString();case Gn:{const a=e.valueOf(),l=t.valueOf();return er(a,l)}case Nn:case qn:case Cn:return Object.is(e.valueOf(),t.valueOf());case Mn:return e.source===t.source&&e.flags===t.flags;case Pn:return e===t}n=n??new Map;const c=n.get(e),u=n.get(t);if(c!=null&&u!=null)return c===t;n.set(e,t),n.set(t,e);try{switch(o){case Bn:{if(e.size!==t.size)return!1;for(const[a,l]of e.entries())if(!t.has(a)||!ue(l,t.get(a),a,e,t,n,r))return!1;return!0}case xn:{if(e.size!==t.size)return!1;const a=Array.from(e.values()),l=Array.from(t.values());for(let f=0;f<a.length;f++){const h=a[f],g=l.findIndex(v=>ue(h,v,void 0,e,t,n,r));if(g===-1)return!1;l.splice(g,1)}return!0}case zn:case Kn:case Fn:case Un:case Qn:case Hn:case Wn:case Yn:case Vn:case Xn:case Jn:case Zn:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(!ue(e[a],t[a],a,e,t,n,r))return!1;return!0}case Ln:return e.byteLength!==t.byteLength?!1:le(new Uint8Array(e),new Uint8Array(t),n,r);case $n:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:le(new Uint8Array(e),new Uint8Array(t),n,r);case Dn:return e.name===t.name&&e.message===t.message;case Be:{if(!(le(e.constructor,t.constructor,n,r)||_t(e)&&_t(t)))return!1;const l=[...Object.keys(e),...at(e)],f=[...Object.keys(t),...at(t)];if(l.length!==f.length)return!1;for(let h=0;h<l.length;h++){const g=l[h],v=e[g];if(!Object.hasOwn(t,g))return!1;const k=t[g];if(!ue(v,k,g,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function nr(e,t){return tr(e,t,En)}var $=jt,d=(()=>{const e=(function(t){const n=[],r=arguments.length;let o=0;for(;;){if(o<r){n.push(arguments[o]),o=o+1;continue}break}const s=0<n.length?n.slice(0):null;return e.cljs$core$IFn$_invoke$arity$variadic(s)});return e.cljs$core$IFn$_invoke$arity$variadic=(function(t){return(()=>{try{if(localStorage.getItem("debug")==="eucalypt:*")return console.log.apply(console,t)}catch{return null}})()}),e.cljs$lang$maxFixedArity=0,e})();d("eucalypt.cljs loading...");var rr=function(e,t){return e["---meta"]=t,e},qt=function(e){return e["---meta"]},or=function(e){const t=K(e);for(let n of p(t)){const r=n;if(i((()=>{const o=Vt(r);return i(o)?r.watchers:o})())){const o=r.watchers;for(let s of p(m(o))){const c=s;_(qt(c),"normalized-component")===e&&y(o,(function(u){return Ee(z((function(a){return c===a}),u))}))}}}return null},W=null,xe="http://www.w3.org/1999/xhtml",me={"get-initial-state":(function(e){return null}),"component-will-receive-props":ne,"should-component-update":ne,"component-will-update":ne,"component-did-update":ne,"component-will-unmount":or},ve=$({}),He=$({}),ae=$({}),re=$(0),Bt=$({}),xt=function(e,t){const n=W;return(()=>{try{return W=rr((function(){return dr(e)}),{"normalized-component":e}),t()}finally{W=n}})()},zt=function(e){for(let t of p(m(Bt))){const n=t;A(n,0,null);const o=A(n,1,null).watchers;i(o)&&y(o,(function(c){return Ee(z((function(u){return _(qt(u),"normalized-component")===e}),c))}))}return null},Pt=function(e){return Me(S,ce((function(t){const n=t,r=A(n,0,null),o=A(n,1,null);return S(r,":",o,";")}),e))},sr={"on-double-click":"ondblclick"},We=function(e,t){return i((()=>{const n=e==="on-change";return n&&_(new Set(["INPUT","TEXTAREA"]),t)})())?"oninput":_(sr,e,e.replaceAll("-",""))},cr=function(e,t){for(let n of p(t)){const r=n,o=A(r,0,null),s=A(r,1,null);if(o!=="xmlns")if(o==="ref")i(H(s))&&(e["---ref-fn"]=s,s(e));else if(i(o.startsWith("on-"))){if(i(H(s))){const c=We(o,e.tagName);e[c]=s}}else if(o==="style")i(H(s))&&(e.style=Pt(s));else if(o==="class"){const c=i((()=>{const u=te(s);return i(u)?I(N(s)):u})())?O(z(oe,s)).join(" "):s;i((()=>{const u=c==null;return u||c===""})())?e.removeAttribute("class"):e.setAttribute("class",c)}else i((()=>{const c=o==="checked";return c||o==="selected"})())?i(H(s))&&(e[o]=s):i(H(s))&&e.setAttributeNS(null,o,s)}return null},ir=function(e){const n=S(e).split("#",2),r=A(n,0,null),o=A(n,1,null),s=r.split(/\./),c=R(s),u=b(c),a=ee(c),l=u,f=a,h=i(we(l))?"div":l,g=i(o)?o.split(/\./):[],v=R(g),k=b(v),pe=ee(v),Ce=k,J=O(z(we,tt(f,pe)));return{"tag-name":h,id:Ce,classes:i(R(J))?J:null}},ur=function(e){const n=R(e),r=b(n),o=ee(n),s=r,c=o,u=ir(s),a=_(u,"tag-name"),l=_(u,"id"),f=_(u,"classes"),h=i(X(b(c)))?b(c):{},g=(()=>{const J=_(h,"id");return i(J)?J:l})(),v=_(h,"class"),k=(()=>{const J=(()=>{const ie=f;return i(ie)?ie:[]})(),Yt=v==null?[]:i(N(v))?[v]:i((()=>{const ie=te(v);return i(ie)?I(N(v)):ie})())?O(v):[v],it=O(tt(J,Yt));if(i(R(it)))return it})(),pe=i(g)?w(h,"id",g):h,Ce=i(H(k))?w(pe,"class",k):de(pe,"class"),ct=i(X(b(c)))?K(c):c;return{"tag-name":a,attrs:Ce,content:ct}},ar=function(e){const t=ur(e),n=_(t,"tag-name"),r=_(t,"attrs"),o=_(t,"content"),s=_(r,"value"),c=de(r,"value"),u=xe,a=n==="svg"?"http://www.w3.org/2000/svg":u,l=document.createElementNS(a,n);return(()=>{try{xe=a,cr(l,c);for(let f of p(o)){const g=B(f);if(i(g)){const v=g;l.appendChild(v)}}if(i(H(s)))if(i((()=>{const f=l.tagName==="SELECT";return f&&l.multiple})())){const f=Ee(s);for(let h of p(l.options)){const g=h;g.selected=fe(f,g.value)}}else l.value=s;return l}finally{xe=u}})()},lr=function(e){const t=e._eucalypt_id;if(i(t))return t;{const n=S("fn_",Ct());return e._eucalypt_id=n,n}},rt=function(e){if(d("normalize-component called with:",e),d("normalize-component: component metadata:",be(e)),i(te(e))){const t=b(e),n=K(e);if(i(se(t))){const r=t,o=O(n),s=be(e),c=lr(r),u=i(fe(s,"key"))?S(c,"_key_",_(s,"key")):S(c,"_pos_",y(re,Oe)),a=c,l=_(m(ae),u),f=_(m(ae),a);if(i(l))return d("normalize-component: using cached instance for key:",u),M([_(l,"instance")],o);if(i(f))return d("normalize-component: using cached shared for key:",a),M([_(f,"instance")],o);{d("normalize-component: cache miss for keys:",u,"and",a);const h=Me(r,o);if(i(se(h))){const v=Qe(me,{"reagent-render":h}),k=M([v],o);return d("normalize-component: Form-2, caching with key:",u),y(ae,w,u,{type:"form-2",instance:v}),k}else{const g=Qe(me,{"reagent-render":r}),v=M([g],o);return d("normalize-component: Form-1, caching with key:",a),y(ae,w,a,{type:"form-1",instance:g}),v}}}else{if(i(N(t)))return M([w(me,"reagent-render",(function(){return e}))],n);if(i(X(t))){const r=t,o=_(r,"reagent-render"),s=M({"reagent-render":o},ce((function(c){const u=c,a=A(u,0,null),l=A(u,1,null),f=_(r,a),h=i(f)?Jt(f,l):l;return[a,h]}),me));return M([s],n)}else return null}}},ot=function(e){const n=R(e),r=b(n),o=ee(n),s=r,c=o,u=_(s,"reagent-render");d("component->hiccup: calling reagent-render with params:",c);const a=Me(u,c);return d("component->hiccup: reagent-render returned:",a),a},B=function(e){d("hiccup->dom called with:",e);const t=i((()=>{const n=N(e);return i(n)?n:Rt(e)})())?document.createTextNode(S(e)):i(x(e))?(()=>{const r=R(e),o=b(r);ee(r);const s=o;if(i(se(s)))return B(ot(rt(e)));if(i(x(s))){const c=document.createDocumentFragment();for(let u of p(e)){const l=B(u);if(i(l)){const f=l;c.appendChild(f)}}return c}else if(s==="<>"){const c=document.createDocumentFragment();for(let u of p(K(e))){const l=B(u);if(i(l)){const f=l;c.appendChild(f)}}return c}else return ar(e)})():i(Ze(e))?(()=>{const n=document.createDocumentFragment();for(let r of p(e)){const o=r,s=i((()=>{const u=x(o);return i(u)?be(o):u})())?Sn(o,be(o)):o,c=B(s);if(i(c)){const u=c;n.appendChild(u)}}return n})():i(se(e))?B(e()):i(X(e))?B(_(e,"reagent-render")()):i((()=>{const n=e==null;return n||kn(e)})())?null:document.createTextNode(S(e));return d("hiccup->dom returning:",t),t},fr=function(e,t){const n=nr(e,t);return d("hiccup-eq?:",n),I(n)&&d("hiccup-eq? details: a:",e,"b:",t),n},dt=function(e){d("is-sequence-of-hiccup-elements? checking:",e);const t=(()=>{const n=te(e);if(i(n)){const r=I(N(e));if(r){const o=R(e);return i(o)?yn((function(s){const c=s==null;return c||x(s)}),e):o}else return r}else return n})();return d("is-sequence-of-hiccup-elements? result:",t),t},Ye=function(e){const t=K(e);return i(X(b(t)))?K(t):t},Q=function(e){d("fully-render-hiccup called with:",e);const t=e==null?null:i(se(e))?Q(e()):i(dt(e))||i((()=>{const n=H(e[Symbol.iterator]);if(i(n)){const r=I(x(e));return r&&I(N(e))}else return n})())?Fe(Q,e):i(x(e))?(()=>{const n=b(e);if(i(se(n)))return Q(ot(rt(e)));{const r=i(X(De(e)))?De(e):null,o=i(r)?gn(2,e):K(e),s=i(r)?[b(e),r]:[b(e)];return M(s,At((function(c,u){const a=Q(u);if(d("fully-render-hiccup reduce: processing child, processed=",a),i((()=>{const l=te(a);if(i(l)){const f=I(N(a));return f&&we(a)}else return l})()))return c;{const l=dt(a);return d("fully-render-hiccup reduce: is-sequence-of-hiccup-elements?=",l),i((()=>{const f=x(a);return i(f)?b(a)==="<>":f})())?(d("fully-render-hiccup reduce: unpacking fragment"),M(c,Ye(a))):i(l)?(d("fully-render-hiccup reduce: unpacking sequence of hiccup elements"),M(c,a)):(d("fully-render-hiccup reduce: appending single child"),Ie(c,a))}}),[],o))}})():i(X(e))?Q(_(e,"reagent-render")()):e;return d("fully-render-hiccup returning:",t),t},st=function(e){if(i(e)){const t=e["---ref-fn"];if(i(t)){const n=t;d("unmount-node-and-children: calling ref-fn for node",e),n(null),e["---ref-fn"]=null}for(let n of p(O(e.childNodes)))st(n);return null}},Lt=function(e){if(i(e))return st(e),e.remove()},Dt=function(e,t,n){d("--- patch-children start for dom:",n.toString());const r=O(z(oe,Ye(e))),o=O(z(oe,Ye(t))),s=$(O(n.childNodes)),c=Z(r),u=Z(o),a=Z(m(s));d("patch-children: len-a:",c,"len-b:",u,"len-dom:",a),d("patch-children: children-a:",r),d("patch-children: children-b:",o);let l=0;for(;;){if(l<Tn(c,u)){const f=A(r,l),h=A(o,l),g=A(m(s),l),v=$t(f,h,g);i(D(g,v))&&y(s,w,l,v),l=l+1;continue}break}if(u>c)for(let f of p(St(c,u))){const h=f;n.appendChild(B(A(o,h)))}if(c>u){const f=c-u;let h=0;for(;;){if(h<f){Lt(n.lastChild),h=h+1;continue}break}}},Ae=function(e){d("get-attrs called on hiccup:",e);const t=De(e);return i(X(t))?t:{}},_r=function(e,t,n){d("patch-attributes called with hiccup-a:",e,"hiccup-b:",t);const r=Ae(e),o=Ae(t),s=_(r,"ref"),c=_(o,"ref"),u=n.tagName;d("patch-attributes: a-attrs:",r,"b-attrs:",o),d("patch-attributes: a-ref:",s,"b-ref:",c),d("patch-attributes: about to compare refs. are they equal?",s===c,"a-ref:",s,"b-ref:",c),s!==c&&(d("patch-attributes: refs are different, handling lifecycle"),i(s)&&s(null),i(c)&&c(n),n["---ref-fn"]=c);for(let a of p(r)){const l=a,f=A(l,0,null);A(l,1,null),i((()=>{const h=I(fe(o,f));if(h){const g=D(f,"ref");return i(g)?D(f,"xmlns"):g}else return h})())&&(i(f.startsWith("on-"))?n[We(f,u)]=null:n.removeAttribute(f))}for(let a of p(o)){const l=a,f=A(l,0,null),h=A(l,1,null);if(i((()=>{const g=D(f,"ref");return i(g)?D(f,"xmlns"):g})())){const g=_(r,f);if(i(f.startsWith("on-")))n[We(f,u)]=h;else if(i(D(h,g))&&(d("patch-attributes: updating attribute",f,"from",g,"to",h,"on",n),f!=="value"))if(f==="class"){const v=i((()=>{const k=te(h);return i(k)?I(N(h)):k})())?O(z(oe,h)).join(" "):h;i((()=>{const k=v==null;return k||v===""})())?n.removeAttribute("class"):n.setAttribute("class",v)}else if(i((()=>{const v=f==="checked";return v||f==="selected"})()))n[f]=h;else if(h==null)n.removeAttribute(f);else{const v=f==="style"?Pt(h):h;n.setAttributeNS(null,f,v)}}}return null},Te=function(e){return i((()=>{const t=Ze(e);return i(t)?e.gen:t})())?Fe(Te,e):i((()=>{const t=te(e);return i(t)?I(N(e)):t})())?M(nt(e),ce(Te,e)):e},$t=function(e,t,n){d("patch: hiccup-a-rendered",e,"hiccup-b-rendered",t,"dom-a",n.toString());const r=Te(e),o=Te(t),s=fr(r,o);if(d("patch: are-equal is",s,"(type",typeof s,")"),i(s))return d("patch: hiccup is equal, doing nothing"),n;if(i((()=>{const c=I(x(r));if(c)return c;{const u=I(x(o));return u||D(b(r),b(o))}})())){const c=B(o);return d("patch: replacing node. dom-a:",n,"new-node:",c),i(n)&&d("patch: replacing node. dom-a.textContent:",n.textContent,"new-node.textContent:",c.textContent),st(n),n.replaceWith(c),c}else{d("patch: hiccup not equal, patching children and attributes"),_r(r,o,n),Dt(r,o,n);const c=Ae(r),u=Ae(o),a=_(u,"value");if(i((()=>{const l=fe(u,"value");return i(l)?D(_(c,"value"),a):l})()))if(d("patch: value changed from",_(c,"value"),"to",a,"on",n),i((()=>{const l=n.tagName==="SELECT";return l&&n.multiple})())){const l=Ee(a);for(let f of p(n.options)){const h=f;h.selected=fe(l,h.value)}}else n.value=a;return n}},dr=function(e){d("modify-dom called for component:",e),zt(e),j(re,0);const t=_(m(ve),e);d("modify-dom: mounted-info from cache:",t);const n=t,r=_(n,"hiccup"),o=_(n,"dom"),s=_(n,"container"),c=xt(e,(function(){return ot(e)})),u=Q(c);if(i((()=>{const a=x(r);return i(a)?b(r)==="<>":a})()))return j(re,0),Dt(r,u,s),y(ve,w,e,{hiccup:u,dom:o,container:s});{j(re,0);const a=$t(r,u,o);if(d("modify-dom: new DOM",a),y(ve,w,e,{hiccup:u,dom:a,container:s}),i(D(o,a)))return d("modify-dom: DOM changed, replacing in container"),s.innerHTML="",s.appendChild(a)}},ht=function(e){d("notify-watchers called with",Z(m(e)),"watchers");for(let t of p(m(e))){const n=t;d("calling watcher");const r=W;try{W=n,n()}finally{W=r}}return null},hr=function(e){return xt(e,(function(){const t=_(b(e),"reagent-render"),n=K(e),r=Me(t,n),o=B(r);return[r,o]}))},pr=function(e){const t=_(m(He),e);if(i(t)){const n=t;zt(n);const o=R(n),s=b(o);ee(o),_(s,"component-will-unmount")(n),y(He,de,e)}j(ae,{});for(let n of p(O(e.childNodes)))Lt(n);return null},mr=function(e,t){pr(t),j(re,0);const r=R(e),o=b(r);ee(r),_(o,"_reagent-render");const c=hr(e),u=A(c,0,null),a=A(c,1,null);j(re,0);const l=Q(u);return t.appendChild(a),y(ve,w,e,{hiccup:l,dom:a,container:t}),y(He,w,t,e)},gr=function(e){const t=$(e),n=t._deref,r=t._reset_BANG_,o=S("ratom-",Ct());return t["ratom-id"]=o,t.watchers=$(new Set([])),t.cursors=$(new Set([])),t._deref=(function(){return i(W)&&(d("ratom deref: watcher found, adding to set."),y(t.watchers,Ie,W)),n.call(t)}),t._reset_BANG_=(function(s){d("ratom _reset_BANG_ called with",s);const c=r.call(t,s);ht(t.watchers);for(let u of p(m(t.cursors)))ht(u.watchers);return c}),y(Bt,w,o,t),t},vr=function(e,t){d("render called with component:",e,"and container:",t);const n=rt(e);return d("render: normalized-component is",n),mr(n,t)},L=gr;function Kt(e,t){if(t===void 0&&(t=e,e=""),t instanceof Array)return t.join(e);let n="",r=!1;for(const o of p(t))r&&(n+=e),n+=o,r=!0;return n}function yr(e){return e.trim()}function wr(e,t){if(t.length>1)for(;t[t.length-1]==="";)t.pop();return t}function br(e,t,n){const r=e.split(t,n);return wr(n,r)}const Ar=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},pt=function(e,t,n){var r="g";t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u");const o=new RegExp(t.source,r);return e.replace(o,n)},Tr=function(e){return(...t)=>{const[n,r,o]=t;return n.length==1?e(n[0]):e(n)}};function mt(e,t,n){if(N(t))return e.replace(new RegExp(Ar(t),"g"),n);if(t instanceof RegExp)return N(n)?pt(e,t,n):pt(e,t,Tr(n));throw"Invalid match arg: $match"}console.log("main.cljs loading...");var T=L({page:"home",counter:0,timer:0,coins:99,showfrag:!1,"text-input":"","page-size":"loading...",slots:O(pn(15,null))}),Ft=L(new Date),Ve=L("#f34");setInterval((function(){return j(Ft,new Date)}),1e3);var jr=function(){return fetch(location.href).then((function(e){const t=e.headers,n=t.get("content-encoding")==="gzip",r=t.get("content-length");if(i((()=>{const o=n;return o&&r})())){const o=parseInt(r)/1024;return y(T,w,"page-size",S(o.toFixed(1),"kb gzipped"))}else return e.text().then((function(o){const s=o.length/1024;return y(T,w,"page-size",S(s.toFixed(1),"kb"))}))})).catch((function(e){return console.error("Error fetching page size:",e),y(T,w,"page-size","Error")}))},Sr=function(e){if(i(e))return Kt(`
`,ce((function(t){const n=mt(t,/\[(.*?)\]\((.*?)\)/,'<a href="$2">$1</a>');return i(qe(/^# /,t))?S("<h1>",mt(t,/^# /,""),"</h1>"):i(qe(/^- /,t))?S(n,`</br>
`):i(qe(/\[.*?\]\(.*?\)/,t))?n:S("<p>",t,"</p>")}),e.split(`

`)))},C=function(e,t){return["a",{href:"#",class:"nav-link","on-click":(function(n){return n.preventDefault(),y(T,w,"page",e)})},t]},kr=function(){return["div",["h1","Eucalypt demos"],["p","These demos are compiled into this single HTML file artifact."],["p","It has a file size of ",["strong",_(m(T),"page-size")],"."],["p","See ",["a",{href:"small.html"},"small.html"]," for the smallest possible artifact of around 9kb."],["p","Visit the ",["a",{href:"https://github.com/chr15m/eucalypt"},"GitHub project"]," for info on installing and using Eucalypt."],["section",{ref:(function(e){if(i(e)){const r=On.default.split("\x3C!-- end-about -->"),o=b(r),s=Sr(o);return e.innerHTML=s}})}],["hr"],["p","Counter demo: ",_(m(T),"counter")],["button",{"on-click":(function(e){return y(T,Ge,"counter",Oe)})},"Increment"]]},Ir=function(){return["div",["h1","Text Input Page"],["p","The current text is: ",_(m(T),"text-input")],["input",{type:"text",value:_(m(T),"text-input"),"on-input":(function(e){return y(T,w,"text-input",e.target.value)})}],["p","This is some text after the input to test rendering."]]},Or=function(){return["svg",{stroke:"currentColor",fill:"none","stroke-linejoin":"round",width:"24",xmlns:"http://www.w3.org/2000/svg","stroke-linecap":"round","stroke-width":"2",class:"icon",viewBox:"0 0 24 24",height:"24"},["path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}],["path",{d:"M16 4a1 1 0 1 0 2 0a1 1 0 0 0 -2 0"}],["path",{d:"M5.5 15h3.5l.75 -1.5"}],["path",{d:"M14 19v-5l-2.5 -3l2.5 -4"}],["path",{d:"M8 8l3 -1h4l1 3h3"}],["path",{d:"M17.5 21a.5 .5 0 1 0 0 -1a.5 .5 0 0 0 0 1z",fill:"currentColor"}],["path",{d:"M3 18c0 .552 .895 1 2 1h14c1.105 0 2 -.448 2 -1"}],["path",{d:"M6.5 21a.5 .5 0 1 0 0 -1a.5 .5 0 0 0 0 1z",fill:"currentColor"}]]},Er=function(){return["div",["h1","SVG Test Page"],[Or]]},ze=function(e,t,n,r,o,s,c,u){return["input",{type:"range",value:r,min:o,max:s,step:c,class:"slider","on-input":(function(a){console.log("slider on-input fired",a);const l=parseFloat(a.target.value);return y(e,(function(f){return t(de(w(f,n,l),u))}))})}]},Pe=function(e){const t=e,n=t,r=_(t,"voltage"),o=_(t,"current"),s=_(t,"resistance");return r==null?w(n,"voltage",o*s):w(n,"current",r/s)},ge=L({voltage:12,current:.5,resistance:24}),Mr=function(){const e=m(ge),t=_(e,"voltage"),n=_(e,"current"),r=_(e,"resistance");return["div",["h3","Ohm's Law Calculator"],["div","Voltage: ",t.toFixed(2),"V",[ze,ge,Pe,"voltage",t,0,30,.1,"current"]],["div","Current: ",n.toFixed(2),"A",[ze,ge,Pe,"current",n,0,3,.01,"voltage"]],["div","Resistance: ",r.toFixed(2),"Ω",[ze,ge,Pe,"resistance",r,0,100,1,"voltage"]]]},Ut=function(){return["div",["p","I am a component!"],["p",{class:"someclass"},"I have ",["strong","bold"],["span",{class:"text-red"}," and red "],"text."]]},Rr=function(){return["div",["p","I include simple-component."],[Ut]]},Gr=function(e){return["p","Hello, ",e,"!"]},Nr=function(){return[Gr,"world"]},Cr=function(e){return["ul",G(function*(){for(let t of p(e))yield["li","Item ",t]})]},qr=function(){return["div","Here is a list:",[Cr,St(3)]]},Br=function(){return["div#main.container",["h1.title","Decorated Component"],["p","This component uses ID and class decorators."]]},xr=function(){return["div",["h1","Basic Tests"],["h2","simple-component"],[Ut],["hr"],["h2","simple-parent"],[Rr],["hr"],["h2","say-hello (hello-component)"],[Nr],["hr"],["h2","lister-user (lister)"],[qr],["hr"],["h2","Decorated Component"],[Br]]},zr=function(){return console.log("ref-test-page render fn called"),["div",{ref:(function(e){return console.log("ref-test-page :ref fn called with el:",e)})},["h1","Ref Test Page"],["p",{ref:(function(e){if(i(e))return e.style["background-color"]="pink"})},"Original text that gets replaced."],["p","Check the console to see the :ref function getting called."]]},Pr=(()=>{const e=jt(null),t=(function(n){if(console.log("timer-page :ref fn called with el:",n,"and interval-id:",m(e)),i(n)){if(m(e)==null)return console.log("Timer :ref mount, starting timer."),j(e,setInterval((function(){return y(T,Ge,"timer",Oe)}),1e3))}else if(i(m(e)))return console.log("Timer :ref unmount, clearing timer."),clearInterval(m(e)),j(e,null)});return console.log("timer-page component defined, interval-id atom created:",e),function(){return console.log("timer-page render fn called, interval-id is:",m(e)),["div",{ref:t},["h1","Timer Page"],["p","The timer increments every second only while on this tab."],["p","The current timer is: ",_(m(T),"timer")]]}})(),Le=L([]),Lr=function(){return["div",["h1","List Demo"],["button",{"on-click":(function(e){return y(Le,Ie,Math.random())})},"+ Add"],["ul",G(function*(){for(let e of p(m(Le))){const t=e;yield["li",t," ",["button",{"on-click":(function(n){return y(Le,(function(r){return O(z((function(o){return o===t}),r))}))})},"x"]]}})]]},F=L({}),Qt=L(0),ye=function(e){const t=y(Qt,Oe);return y(F,w,t,{id:t,title:e,done:!1})},Dr=function(e){return y(F,vn,[e,"done"],I)},$r=function(e,t){return y(F,_e,[e,"title"],t)},Kr=function(e){return y(F,de,e)},Ht=function(e,t,n){return M(nt(e),t(n,e))},Fr=function(e){return y(F,Ht,ce,(function(t){return _e(t,[1,"done"],e)}))},Ur=function(){return y(F,Ht,z,(function(e){return Et(e,[1,"done"])}))},Wt=function(e){const t=e,n=_(t,"title"),r=_(t,"on-save"),o=_(t,"on-stop"),s=L((()=>{const c=n;return i(c)?c:""})());return function(c){const u=(function(l){if(j(s,""),i(o))return o()}),a=(function(l){const f=yr(S(m(s)));return i(we(f))||r(f),u()});return["input",Qe({type:"text",value:m(s),"on-blur":a,"on-change":(function(l){return j(s,l.target.value)}),"on-key-down":(function(l){switch(l.code){case"Enter":return a();case"Escape":return u()}})},ln(c,["id","class","placeholder","ref"]))]}},Qr=function(e){return[Wt,w(e,"ref",(function(t){if(i(t))return t.focus()}))]},Hr=function(e){const t=e,n=_(t,"filt"),r=_(t,"active"),o=_(t,"done"),s=(function(c){return{href:"#",class:c===m(n)?"selected":null,"on-click":(function(u){return u.preventDefault(),j(n,c)})}});return["div",["span",{id:"todo-count"},["strong",r]," ",(()=>{switch(r){case 1:return"item";default:return"items"}})()," left"],["ul",{id:"filters"},["li",["a",s("all"),"All"]],["li",["a",s("active"),"Active"]],["li",["a",s("done"),"Completed"]]],o>0?["button",{id:"clear-completed","on-click":Ur},"Clear completed ",o]:null]},Wr=function(){const e=L(!1);return function(t){const n=t,r=_(n,"id"),o=_(n,"done"),s=_(n,"title");return["li",{class:Kt(" ",z(oe,[i(o)?"completed":null,i(m(e))?"editing":null]))},["div",{class:"view"},["input",{class:"toggle",type:"checkbox",checked:o,"on-change":(function(){return Dr(r)})}],["label",{"on-double-click":(function(){return j(e,!0)})},s],["button",{class:"destroy","on-click":(function(){return Kr(r)})},"X"]],i(m(e))?[Qr,{class:"edit",title:s,"on-save":(function(c){return $r(r,c)}),"on-stop":(function(){return j(e,!1)})}]:null]}},Yr=function(){const e=L("all");return function(){const t=bn("id",jn(m(F))),n=Z(Ke("done",t)),r=Z(t)-n;return["div",["section",{id:"todoapp"},["header",{id:"header"},["h1","todos"],[Wt,{id:"new-todo",placeholder:"What needs to be done?","on-save":ye}]],i(R(t))?["div",["section",{id:"main"},["p",["input",{id:"toggle-all",type:"checkbox",checked:r===0,"on-change":(function(){return Fr(r>0)})}],["label",{for:"toggle-all"},"Mark all as complete"]],["ul",{id:"todo-list"},G(function*(){for(let o of p(Ke((()=>{const s=m(e);switch(s){case"active":return Ue("done");case"done":return"done";case"all":return ne;default:throw new Error(S("No matching clause: ",s))}})(),t)))yield[Wr,o]})]],["footer",{id:"footer"},[Hr,{active:r,done:n,filt:e}]]]:null],["footer",{id:"info"},["p","Double-click to edit a todo"]]]}},Vr=function(){return j(F,{}),j(Qt,0),ye("one"),ye("two"),ye("three"),y(F,_e,[2,"done"],!0)},Xr=function(e){return["h1",e]},Jr=function(){const e=b(br(m(Ft).toTimeString()," "));return["div",{style:{color:m(Ve),"font-size":"2em","font-family":"monospace"}},e]},Zr=function(){return["div","Time color: ",["input",{type:"text",value:m(Ve),"on-input":(function(e){return j(Ve,e.target.value)})}]]},eo=function(){return["div",[Xr,"Hello world, it is now"],[Jr],[Zr]]},to=function(){return["div",{class:"hud"},"🪙 ",_(m(T),"coins")]},no=function(){return y(T,(function(e){const t=_(e,"coins"),n=_(e,"slots");if(i((()=>{const r=t>0;return r&&An(oe,n)})())){const r=n.indexOf(null);return _e(Ge(e,"coins",Zt),["slots",r],"🪙")}else return e}))},ro=function(){return["<>",[to],i(_(m(T),"showfrag"))?["div","Hidden"]:["section",{class:"slide big",style:{cursor:"pointer"},"on-click":no},["div",{class:"slots"},(()=>{const e=_(m(T),"slots"),n=dn(5,e);return ut((function(r,o){return["div",{class:"slot-row",key:r},(()=>{const s=O(o),u=(Z(s)-1)/2;return ut((function(a,l){const f=Math.abs(a-u),h=f*f*.2,g={transform:S("translateY(",h,"em)")};return i(l)?["span",{class:"emoji filled",style:g,key:a},l]:["span",{class:"emoji",style:g,key:a},"⚪"]}),s)})()]}),n)})()]],["button",{"on-click":(function(){return y(T,Ge,"showfrag",I)})},i(_(m(T),"showfrag"))?"Show":"Hide"]]},oo=function(){const e=_(m(T),"page");return["div",["nav",[C,"home","Home"],[C,"basic-tests","Basic Tests"],[C,"text-input","Text Input"],[C,"timer","Timer"],[C,"ref-test","Ref Test"],[C,"svg","SVG"],[C,"list-demo","List Demo"],[C,"todomvc","TodoMVC"],[C,"fragments","Fragments"],[C,"clock","Clock Demo"],[C,"ohms","Ohm's Law"]],["hr",{class:"separator"}],(()=>{switch(e){case"home":return[kr];case"basic-tests":return[xr];case"text-input":return[Ir];case"timer":return[Pr];case"ref-test":return[zr];case"svg":return[Er];case"list-demo":return[Lr];case"todomvc":return[Yr];case"ohms":return[Mr];case"fragments":return[ro];case"clock":return[eo];default:return["div","Page not found"]}})(),["p",["a",{href:"https://github.com/chr15m/eucalypt"},"Eucalypt on GitHub"]]]};console.log("main.cljs: about to call render!");vr([oo],document.getElementById("app"));jr();Vr();console.log("main.cljs: render! finished");</script>
  <style rel="stylesheet" crossorigin>body{font-family:sans-serif;background-color:#f0f0f0;color:#333}div#app{max-width:800px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a}h1{color:#111}a{color:#007bff;text-decoration:none}a:hover{text-decoration:underline}button{padding:10px 15px;font-size:1rem;border-radius:5px;border:1px solid #ccc;cursor:pointer;background-color:#eee}button:hover{background-color:#ddd}.nav-link{margin-right:.5em}.nav-link+.nav-link{border-left:2px solid #ccc;padding-left:.5em}.slider{width:100%}.text-red{color:red}.separator{margin:1rem 0}.color-orange{color:orange}.color-red{color:red}#todo-list .view{display:flex;justify-content:start;align-items:center;border-bottom:1px solid silver}#todo-list .view label{flex-grow:1;margin-left:.5em}</style>
</head>
<body>
    <div id="app"><div class="loader"></div></div>
</body>
</html>
