<!DOCTYPE html>
<html lang="en">
<head>
    <title>Eucalypt</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
  <script type="module">function E(t){if(t==null||t instanceof Function)return t;const e=typeof t;return e==="string"?(n,r)=>_(n,t,r):e==="object"?(n,r)=>_(t,n,r):t}function ve(t,e,n,...r){if(r.length%2!==0)throw new Error("Illegal argument: assoc expects an odd number of arguments.");switch(x(t)){case D:t.set(e,n);for(let o=0;o<r.length;o+=2)t.set(r[o],r[o+1]);break;case U:case Y:t[e]=n;for(let o=0;o<r.length;o+=2)t[r[o]]=r[o+1];break;default:throw new Error(`Illegal argument: assoc! expects a Map, Array, or Object as the first argument, but got ${typeof t}.`)}return t}function kt(t){switch(x(t)){case D:return new Map(t);case V:return new t.constructor(t);case U:return[...t];case Y:return{...t};default:throw new Error(`Don't know how to copy object of type ${typeof t}.`)}}function w(t,e,n,...r){t||(t={});const o=kt(t);return ve(o,e,n,...r),o}const D=1,U=2,Y=3,St=4,V=5,Jt=6;function Zt(t){switch(t){case D:return new Map;case U:return[];case Y:return{};case St:return new Rt;case V:return new Set;case Jt:return R(function*(){})}}function It(t){return t.constructor===Object}function Xe(t){return t!=null&&It(t)}function x(t){if(t!=null){if(It(t))return Y;if(t instanceof Map)return D;if(t instanceof Set)return V;if(t instanceof Rt)return St;if(Array.isArray(t))return U;if(t instanceof ee)return Jt;if(t instanceof Ct)return V;if(t instanceof Object)return Y}}function Je(t,e,n,r,o){r=M(r);const s=x(n);if(s!==D&&s!==U&&s!==Y)throw new Error(`Illegal argument: ${e} expects the first argument to be a Map, Array, or Object.`);const c=[n];let u=n;for(let a=0;a<r.length-1;a+=1){const l=r[a];let f;u instanceof Map?f=u.get(l):f=u[l],f||(f=Zt(s)),c.push(f),u=f}c.push(o);for(let a=c.length-2;a>=0;a-=1)c[a]=t(c[a],r[a],c[a+1]);return c[0]}function _t(t,e,n){return Je(w,"assoc-in",t,e,n)}function Ze(...t){if(t=t.map(E),t.length===0)return nt;if(t.length===1)return t[0];const[e,...n]=t.slice().reverse();return function(...r){let o=e(...r);for(const s of n)o=s(o);return o}}function ye(t,e){for(const n of e)t.add(n);return t}function we(...t){if(t.length===0)return Ie();const[e,...n]=t;let r=e;switch(r==null&&(r=[]),x(r)){case V:ye(r,n);break;case St:r.unshift(...n.reverse());break;case U:r.push(...n);break;case D:for(const o of n)Array.isArray(o)?r.set(o[0],o[1]):p(o).forEach(s=>{r.set(s[0],s[1])});break;case Y:for(const o of n)Array.isArray(o)?r[o[0]]=o[1]:Object.assign(r,o);break;default:throw new Error("Illegal argument: conj! expects a Set, Array, List, Map, or Object as the first argument.")}return r}function Mt(...t){if(t.length===0)return Ie();const[e,...n]=t;let r=e;r==null&&(r=an());let o,s;switch(x(r)){case V:return r instanceof Ct?ye(new r.constructor(r),n):new r.constructor([...r,...n]);case St:return new Rt(...n.reverse(),...r);case U:return[...r,...n];case D:o=new Map(r);for(const c of n)Array.isArray(c)?o.set(c[0],c[1]):p(c).forEach(u=>{o.set(u[0],u[1])});return o;case Jt:return R(function*(){yield*n,yield*r});case Y:s={...r};for(const c of n)Array.isArray(c)?s[c[0]]=c[1]:Object.assign(s,c);return s;default:throw new Error("Illegal argument: conj expects a Set, Array, List, Map, or Object as the first argument.")}}function ft(t,e){switch(x(t)){case V:case D:return t.has(e);case void 0:return!1;default:return e in t}}function dt(t,...e){if(e.length===0)return t;const n=kt(t);switch(x(t)){case D:for(const r of e)n.delete(r);break;default:for(const r of e)delete n[r];break}return n}function Et(t){return t+1}function tn(t){return t-1}function A(t,e,n){if(t){var r=void 0;if(Array.isArray(t))r=t[e];else{const o=p(t);let s=0;for(const c of o)if(s++==e){r=c;break}}if(r!==void 0)return r}return n}function _(t,e,n=void 0){if(t==null)return n;let r;if(It(t))return r=t[e],r===void 0?n:r;let o;switch(x(t)){case V:t.has(e)&&(r=e);break;case D:r=t.get(e);break;case U:r=t[e];break;default:if(o=t.get,o instanceof Function)try{r=t.get(e);break}catch{}r=t[e];break}return r!==void 0?r:n}function te(t){return t!=null&&!!t[Symbol.iterator]}const et=te;function en(t){return t==null||!!t[Symbol.iterator]}function p(t){if(t==null)return[];if(en(t))return t;if(t instanceof Object)return Object.entries(t);throw new TypeError(`${t} is not iterable`)}const be=Symbol("Iterable"),nn=Symbol.iterator;function Ae(t){return t[Symbol.iterator]()}const rn=Ae;function G(t){if(t==null)return t;const e=p(t);return e.length===0||e.size===0||e[Symbol.iterator]().next().done?null:e}function b(t){const[e]=p(t);return e}function $t(t){const[e,n]=p(t);return n}function K(t){return R(function*(){let e=!0;for(const n of p(t))e?e=!1:yield n})}class Kt{value;constructor(e){this.value=e}_deref(){return this.value}}function on(t){return t instanceof Kt}function Te(t,e,n){t=E(t);let r,o;if(arguments.length===2){const s=p(e)[Symbol.iterator](),c=s.next();c.done?o=t():o=c.value,r=s}else o=e,r=p(n);if(o instanceof Kt)return o.value;for(const s of r)if(o=t(o,s),o instanceof Kt){o=o.value;break}return o}var sn=!1;class ee{constructor(e){this.gen=e,this.usages=0}[Symbol.iterator](){return this.usages++,this.usages>=2,this.gen()}}ee.prototype[be]=!0;function R(t){return new ee(t)}function ct(t,...e){switch(t=E(t),e.length){case 0:return n=>(...r)=>{switch(r.length){case 0:return n();case 1:return n(r[0]);case 2:return n(r[0],t(r[1]));default:return n(r[0],t(...r.slice(1)))}};case 1:return R(function*(){for(const n of p(e[0]))yield t(n)});default:return R(function*(){const n=e.map(r=>rn(p(r)));for(;;){const r=[];for(const o of n){const s=o.next();if(s.done)return;r.push(s.value)}yield t(...r)}})}}function je(t){return e=>(...n)=>{switch(n.length){case 0:return e();case 1:return e(n[0]);case 2:{const r=n[0],o=n[1];return i(t(o))?e(r,o):r}}}}function Ft(t,e){return arguments.length===1?je(t):(t=E(t),R(function*(){for(const n of p(e))i(t(n))&&(yield n)}))}function z(t,e){return arguments.length===1?je(Qt(t)):Ft(Qt(t),e)}function cn(t){return e=>{let n=-1;return(...r)=>{switch(r.length){case 0:return e();case 1:return e(r[0]);case 2:return e(r[0],t((n=n+1,n),r[1]))}}}}function ae(t,e){if(t=E(t),arguments.length===1)return cn(t);const n=[];let r=0;for(const o of p(e))n.push(t(r,o)),r++;return n}function k(...t){return t.join("")}function I(t){return!i(t)}function ot(t){return t==null}class un{constructor(e){this.val=e,this._watches={},this._deref=()=>this.val,this._hasWatches=!1,this._reset_BANG_=n=>{const r=this.val;if(this.val=n,this._hasWatches)for(const o of Object.entries(this._watches)){const s=o[0],c=o[1];c(s,this,r,n)}return n},this._add_watch=(n,r)=>{this._watches[n]=r,this._hasWatches=!0},this._remove_watch=n=>{delete this._watches[n]}}}function ke(t){return new un(t)}function m(t){return t._deref()}function j(t,e){t._reset_BANG_(e)}function y(t,e,...n){e=E(e);const r=e(m(t),...n);return j(t,r),r}function Se(t,e,n){return R(function*(){let r=t,o=e,s=n;e===void 0&&(r=0,o=t);let c=r||0;s=1;const u=s>=0;for(;o===void 0||u&&c<o||!u&&o<c;)yield c,c+=s})}function mt(t,e){if(N(e)){const n=t.exec(e);return n!=null?n.length===1?n[0]:[...n]:null}else throw new TypeError("re-find must match against a string.")}function Ie(...t){return t}function P(t){return x(t)===U}function Ut(...t){if(t.length===2){const[r,o]=t,s=p(o);if(Array.isArray(s)){const c=new Array(s.length);for(var e=0;e<s.length;e++)c[e]=r(s[e]);return c}else{var n=[];for(const c of s)n.push(r(c));return n}}return[...ct(...t)]}function M(t){return ln(t)?t:[...p(t)]}function Ot(t){return new Set(p(t))}const Me=Symbol("IApply__apply");function Gt(t,...e){t=E(t);const n=e.slice(0,e.length-1),r=p(e[e.length-1]),o=t[Me];return o?o(...n,r):t(...n,...r)}function Qt(t){return t=E(t),(...e)=>I(t(...e))}class Rt extends Array{constructor(...e){super(),this.push(...e)}}function an(...t){return new Rt(...t)}function ln(t){return Array.isArray(t)}function Ee(t){return R(function*(){for(const e of t)yield*p(e)})}function ne(...t){return Ee(t)}ne[Me]=t=>Ee(t);function nt(t){return t}function fn(t,e){const n=x(t),r=Zt(n)||{};for(const o of e){const s=_(t,o);s!=null&&ve(r,o,s)}return r}function _n(t){return on(t)?m(t):t}function dn(t){return e=>{let n=[];return(...r)=>{let o,s;switch(r.length){case 0:return e();case 1:return o=r[0],n.length!==0&&(s=[...n],n=[],o=_n(e(o,s))),e(o);case 2:return o=r[0],n.push(r[1]),t===n.length?(s=[...n],n=[],e(o,s)):o}}}}function hn(t,...e){if(arguments.length===1)return dn(t);let n=t,r=e[0];return e.length===2&&([n,r]=e),pn(t,n,[],r,!0)}function pn(t,e,n,r,o){return R(function*(){let s=[],c=0;for(const u of p(r))c<t&&(s.push(u),s.length===t&&(yield s,s=e<t?s.slice(e):[])),c++,c===e&&(c=0);s.length>0&&(s.length===t||o)&&(yield s)})}function re(t){const e=x(t);if(e!=null)return Zt(e);throw new Error(`Can't create empty of ${typeof t}`)}function Ht(...t){const e=t[0];let n;return e==null?n={}:n=O(re(e),e),we(n,...t.slice(1))}function O(...t){let e,n,r,o,s;switch(t.length){case 0:return[];case 1:return t[0];case 2:return Mt(t[0]??[],...p(t[1]));case 3:return e=t[0],n=t[1],r=t[2],o=kt(e),s=(c,u)=>u===void 0?c:we(c,u),Ce(n,s,o,r);default:throw TypeError(`Invalid arity call of into: ${t.length}`)}}function mn(...t){if(t.length==0||t.length>2)throw new Error(`Invalid arity: ${t.length}`);return{[be]:!0,[nn]:t.length==1?function*(){const e=t[0];for(;;)yield e}:function*(){const[e,n]=t;for(var r=0;r<e;r++)yield n}}}function gn(t){return e=>{let n=t;return(...r)=>{const o=r.length;if(o===0)return e();if(o===1)return e(r[0]);if(o===2){const s=r[0],c=r[1],u=n;return n--,u>0?s:e(s,c)}}}}function vn(t,e){return arguments.length===1?gn(t):R(function*(){const n=Ae(p(e));for(let r=0;r<t;r++)n.next();yield*n})}function Nt(t,e,n,...r){return n=E(n),w(t,e,n(_(t,e),...r))}function Oe(t,e,n){let r=t;for(const o of e)r=_(r,o);return r===void 0?n:r}function yn(t,e,n,...r){return n=E(n),_t(t,e,n(Oe(t,e),...r))}function wn(t,e){t=E(t);for(const n of p(e))if(!t(n))return!1;return!0}function Ge(t,e){return arguments.length===1&&(e=t,t=void 0),t=E(t),e=p(e),[...e].sort(t||ht)}function bn(t){return t===ht?t:(e,n)=>{const r=t(e,n);return Re(r)?r:r?-1:t(n,e)?1:0}}function An(t,e,n){return arguments.length===2&&(n=e,e=ht),t=E(t),e=E(e),Ge((r,o)=>{const s=bn(e),c=t(r),u=t(o);return s(c,u)},n)}function Tn(t,e){t=E(t);for(const n of p(e)){const r=t(n);if(i(r))return r}}function bt(t){return!G(t)}function Z(t){if(!t)return 0;const e=t.length||t.size;if(typeof e=="number")return e;let n=0;for(const r of p(t))n++;return n}function H(t){return t!=null}function jn(t,e,...n){return e==null?t:Math.min(t,e,...n)}function X(t){return t==null?!1:!!(It(t)||t instanceof Map)}function tt(t){if(Array.isArray(t)){const e=t.slice(1);return e.length>0?e:null}else return G(K(t))}function ht(t,e){if(t===e)return 0;{if(t==null)return-1;if(e==null)return 1;const n=typeof t,r=typeof e;if(n==="number"&&r==="number"||n==="string"&&r==="string")return t===e?0:t<e?-1:1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length<e.length)return-1;if(t.length>e.length)return 1;for(let o=0;o<t.length;o++){let s=ht(t[o],e[o]);if(s!=0)return s}return 0}else throw new Error(`comparing ${n} to ${r}`)}}function i(t){return t!=null&&t!==!1}function st(t){return typeof t=="function"}function Re(t){return typeof t=="number"}function kn(t){return t?Object.values(t):null}function N(t){return typeof t=="string"}const Ne=Symbol("meta");function At(t){return t instanceof Object?t[Ne]:null}function Sn(t,e){const n=kt(t);return n[Ne]=e,n}function In(t){return t===!0||t===!1}function Ce(t,...e){switch(e.length){case 2:{const n=e[0],r=e[1];return Ce(t,n,n(),r)}default:{let n=e[0];const r=e[1],o=e[2];n=t(n);const s=Te(n,r,o);return n(s)}}}class Ct{constructor(e){e instanceof Ct||(e=Ge(e));const r=new Set(e);this._elts=[...r],this._set=r}add(e){if(this._set.has(e))return this;const n=this._elts;let r=!1;for(let o=0;o<n.length;o++)if(ht(e,n[o])<=0){n.splice(o,0,e),r=!0;break}return r?this._set=new Set(n):(n.push(e),this._set.add(e)),this.size=n.length,this}delete(e){if(!this._set.has(e))return this;const n=this._elts,r=n.indexOf(e);return n.splice(r,1),this._set=new Set(n),this.size=n.length,this}has(e){return this._set.has(e)}keys(){return this.values()}values(){return this._elts[Symbol.iterator]()}entries(){return this._set.entries()}forEach(...e){return this.set.forEach(...e)}clear(){this._elts=[],this._set=new Set(this._elts)}[Symbol.iterator](){return this.keys()}}function xe(){return crypto.randomUUID()}function L(t,e,...n){if(e===void 0||t===e)return!1;for(const r of n)if(t===r)return!1;return!0}const Mn=`# Eucalypt

<p align="center" id="logo"><img src="docs/eucalypt.svg" alt="Eucalypt leaf logo" width="128"/></p>

Eucalypt is a frontend library for [Squint ClojureScript](https://github.com/squint-cljs/squint).
It replaces [Reagent & React](https://reagent-project.github.io/) with a compatible-ish subset of the Reagent API.
It supports form-1 and form-2 Reagent components.

The goal is to build very small frontend artifacts (~10k) using "Reagent" and "ClojureScript" (if you squint hard enough).
It's suitable for small pieces of one-off frontend code that do something simple, not large production web apps.
The examples from the Reagent homepage have been ported and work with Eucalypt.
Eucalypt is itself very small and fits in a single cljs file.

\x3C!-- end-about -->

- **[Try the demo](https://chr15m.github.io/eucalypt/)** - a single HTML file artifact gzipped to ~16k.
- [See the demo source code for examples](https://github.com/chr15m/eucalypt/tree/main/src/demo/).
- [![Latest test Results](https://raw.githubusercontent.com/chr15m/eucalypt/build/test-badge.svg)](https://github.com/chr15m/eucalypt/blob/build/test-results.md) [Tests source code](https://github.com/chr15m/eucalypt/tree/main/src/test/src/)

[Use](#use) | [Bugs](#bugs) | [Gotchas](#gotchas) | [Dev](#dev) | [Tests](#tests) | [Build](#build) | [Use of AI](#use-of-ai) | [Mr Clean](#mr-clean-original-readme)

## Use

Install with npm:

\`\`\`shell
npm i eucalypt
\`\`\`

Use it in your Squint cljs script like this:

\`\`\`clojure
(ns my-app
  (:require
    [eucalypt :as r]))

(defonce state (r/atom {}))

(defn component:main [state]
  [:<>
    [:p "Hello world!"]
    [:pre (pr-str @state)]])

(r/render
  [component:main state]
  (js/document.getElementById "app"))
\`\`\`

There's also a "create" script you can use to bootstrap a Squint, Vite, and Eucalypt project:

\`\`\`shell
npm create eucalypt myapp
cd myapp
npm i
npm run watch
npm run build # <- builds a dist/index.html
\`\`\`

#### Use in JavaScript

Thanks to @borkdude for [this example](https://codepen.io/borkdude/pen/OPMNvwa).

\`\`\`javascript
import { render, atom } from "https://esm.sh/eucalypt";
import { deref, swap_BANG_, update_in } from "https://esm.sh/squint-cljs/core.js";

const swap = swap_BANG_;

const state = atom({counter: 0});

function myComponent () {
 return ["<>",
          ["div", "Hello world"],
          ["div", "Counter: ", deref(state).counter],
          ["button", {"on-click": () => {
            console.log('clock')
            swap(state, update_in, ["counter"], (x) => x + 1);           
            }
          }, "inc"]
        ];
}

render([myComponent], document.getElementById("app"))
\`\`\`

## Bugs

If you find an example form-1 or form-2 component that works in Reagent but doesn't work with Eucalypt, please create a failing test case in the \`tests/src\` folder, and raise a PR.

## Gotchas

Eucalypt gotchas:

- Not currently reentrant. State is shared globally.
- The only well-tested API is \`r/atom\` and \`r/render\`.
- Lots and lots of other weirdness and edge cases for sure.
- [It's slop code](#use-of-ai).

Some things to watch out for when using Squint, which I ran into building this:

- Keywords are just strings. No \`keyword?\`, \`name\` etc.
- No \`binding\`.
- No \`sorted-hashmap\`.
- \`(get {} :a)\` evaluates to \`undefined\` not \`nil\` which can break \`assoc\`, \`update\` and friends on \`nil\`.

## Dev

\`\`\`shell
pnpm i
npm run dev
\`\`\`

## Tests

\`\`\`shell
npm run test
\`\`\`

## Build

\`\`\`shell
npm run build
\`\`\`

## Use of AI

Eucalypt is a fork of [Mr Clean](https://bitbucket.org/sonwh98/mr-clean/) that has been slop-coded with AI into compiling with Squint.

Slop-coded means this library was built by 1. creating failing test cases 2. using an LLM to fix the code until all tests pass.
If you're uncomfortable with this method of development, which involves less human oversight, then you may not want to use this library.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED.

What's with the name? Eucalyptus oil (sometimes used in cleaning) looks like a reagent if you squint hard enough.

---

## Mr Clean (original README)

Mr Clean is a Reagent compatible ClojureScript library without dependency on React.js. At the heart of React.js
is a very simple idea GUI = function(data). Reagent takes this idea even further hiccup = function(data).  The
advantage of using Mr Clean over Reagent is that the generated javascript of a hello-world app is half
the size of that of reagent.

There is no diffing of virtual DOM. The state of components is flushed to the DOM when data changes. 

### What works?

Ractive atoms and cursors work as expected which are the important parts making components reactive to data changes. 
form 1, form 2 components are fully supported.

### What doesn't work?

None of the reagent macros are implemented. r/reaction is not a macro but a function that returns an atom holding the result of evaluating a function.

form 3 components are not fully supported because not all lifecycle methods are implemented.

`;function En(){}function le(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function fe(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const On="[object RegExp]",Gn="[object String]",Rn="[object Number]",Nn="[object Boolean]",_e="[object Arguments]",Cn="[object Symbol]",xn="[object Date]",qn="[object Map]",Bn="[object Set]",Pn="[object Array]",zn="[object Function]",Dn="[object ArrayBuffer]",qt="[object Object]",Ln="[object Error]",$n="[object DataView]",Kn="[object Uint8Array]",Fn="[object Uint8ClampedArray]",Un="[object Uint16Array]",Qn="[object Uint32Array]",Hn="[object BigUint64Array]",Wn="[object Int8Array]",Yn="[object Int16Array]",Vn="[object Int32Array]",Xn="[object BigInt64Array]",Jn="[object Float32Array]",Zn="[object Float64Array]";function de(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function tr(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function er(t,e,n){return ut(t,e,void 0,void 0,void 0,void 0,n)}function ut(t,e,n,r,o,s,c){const u=c(t,e,n,r,o,s);if(u!==void 0)return u;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return lt(t,e,s,c)}return lt(t,e,s,c)}function lt(t,e,n,r){if(Object.is(t,e))return!0;let o=fe(t),s=fe(e);if(o===_e&&(o=qt),s===_e&&(s=qt),o!==s)return!1;switch(o){case Gn:return t.toString()===e.toString();case Rn:{const a=t.valueOf(),l=e.valueOf();return tr(a,l)}case Nn:case xn:case Cn:return Object.is(t.valueOf(),e.valueOf());case On:return t.source===e.source&&t.flags===e.flags;case zn:return t===e}n=n??new Map;const c=n.get(t),u=n.get(e);if(c!=null&&u!=null)return c===e;n.set(t,e),n.set(e,t);try{switch(o){case qn:{if(t.size!==e.size)return!1;for(const[a,l]of t.entries())if(!e.has(a)||!ut(l,e.get(a),a,t,e,n,r))return!1;return!0}case Bn:{if(t.size!==e.size)return!1;const a=Array.from(t.values()),l=Array.from(e.values());for(let f=0;f<a.length;f++){const h=a[f],g=l.findIndex(v=>ut(h,v,void 0,t,e,n,r));if(g===-1)return!1;l.splice(g,1)}return!0}case Pn:case Kn:case Fn:case Un:case Qn:case Hn:case Wn:case Yn:case Vn:case Xn:case Jn:case Zn:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(!ut(t[a],e[a],a,t,e,n,r))return!1;return!0}case Dn:return t.byteLength!==e.byteLength?!1:lt(new Uint8Array(t),new Uint8Array(e),n,r);case $n:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:lt(new Uint8Array(t),new Uint8Array(e),n,r);case Ln:return t.name===e.name&&t.message===e.message;case qt:{if(!(lt(t.constructor,e.constructor,n,r)||de(t)&&de(e)))return!1;const l=[...Object.keys(t),...le(t)],f=[...Object.keys(e),...le(e)];if(l.length!==f.length)return!1;for(let h=0;h<l.length;h++){const g=l[h],v=t[g];if(!Object.hasOwn(e,g))return!1;const S=e[g];if(!ut(v,S,g,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function nr(t,e){return er(t,e,En)}var $=ke,d=(()=>{const t=(function(e){const n=[],r=arguments.length;let o=0;for(;;){if(o<r){n.push(arguments[o]),o=o+1;continue}break}const s=0<n.length?n.slice(0):null;return t.cljs$core$IFn$_invoke$arity$variadic(s)});return t.cljs$core$IFn$_invoke$arity$variadic=(function(e){return(()=>{try{if(localStorage.getItem("debug")==="eucalypt:*")return console.log.apply(console,e)}catch{return null}})()}),t.cljs$lang$maxFixedArity=0,t})();d("eucalypt.cljs loading...");var rr=function(t,e){return t["---meta"]=e,t},qe=function(t){return t["---meta"]},or=function(t){const e=K(t);for(let n of p(e)){const r=n;if(i((()=>{const o=Xe(r);return i(o)?r.watchers:o})())){const o=r.watchers;for(let s of p(m(o))){const c=s;_(qe(c),"normalized-component")===t&&y(o,(function(u){return Ot(z((function(a){return c===a}),u))}))}}}return null},W=null,Bt="http://www.w3.org/1999/xhtml",gt={"get-initial-state":(function(t){return null}),"component-will-receive-props":nt,"should-component-update":nt,"component-will-update":nt,"component-did-update":nt,"component-will-unmount":or},yt=$({}),Wt=$({}),at=$({}),rt=$(0),Be=$({}),Pe=function(t,e){const n=W;return(()=>{try{return W=rr((function(){return dr(t)}),{"normalized-component":t}),e()}finally{W=n}})()},ze=function(t){for(let e of p(m(Be))){const n=e;A(n,0,null);const o=A(n,1,null).watchers;i(o)&&y(o,(function(c){return Ot(z((function(u){return _(qe(u),"normalized-component")===t}),c))}))}return null},De=function(t){return Gt(k,ct((function(e){const n=e,r=A(n,0,null),o=A(n,1,null);return k(r,":",o,";")}),t))},sr={"on-double-click":"ondblclick"},Yt=function(t,e){return i((()=>{const n=t==="on-change";return n&&_(new Set(["INPUT","TEXTAREA"]),e)})())?"oninput":_(sr,t,t.replaceAll("-",""))},cr=function(t,e){for(let n of p(e)){const r=n,o=A(r,0,null),s=A(r,1,null);if(o!=="xmlns")if(o==="ref")i(H(s))&&(t["---ref-fn"]=s,s(t));else if(i(o.startsWith("on-"))){if(i(H(s))){const c=Yt(o,t.tagName);t[c]=s}}else if(o==="style")i(H(s))&&(t.style=De(s));else if(o==="class"){const c=i((()=>{const u=et(s);return i(u)?I(N(s)):u})())?M(z(ot,s)).join(" "):s;i((()=>{const u=c==null;return u||c===""})())?t.removeAttribute("class"):t.setAttribute("class",c)}else i((()=>{const c=o==="checked";return c||o==="selected"})())?i(H(s))&&(t[o]=s):i(H(s))&&t.setAttributeNS(null,o,s)}return null},ir=function(t){const n=k(t).split("#",2),r=A(n,0,null),o=A(n,1,null),s=r.split(/\./),c=G(s),u=b(c),a=tt(c),l=u,f=a,h=i(bt(l))?"div":l,g=i(o)?o.split(/\./):[],v=G(g),S=b(v),pt=tt(v),xt=S,J=M(z(bt,ne(f,pt)));return{"tag-name":h,id:xt,classes:i(G(J))?J:null}},ur=function(t){const n=G(t),r=b(n),o=tt(n),s=r,c=o,u=ir(s),a=_(u,"tag-name"),l=_(u,"id"),f=_(u,"classes"),h=i(X(b(c)))?b(c):{},g=(()=>{const J=_(h,"id");return i(J)?J:l})(),v=_(h,"class"),S=(()=>{const J=(()=>{const it=f;return i(it)?it:[]})(),Ve=v==null?[]:i(N(v))?[v]:i((()=>{const it=et(v);return i(it)?I(N(v)):it})())?M(v):[v],ue=M(ne(J,Ve));if(i(G(ue)))return ue})(),pt=i(g)?w(h,"id",g):h,xt=i(H(S))?w(pt,"class",S):dt(pt,"class"),ie=i(X(b(c)))?K(c):c;return{"tag-name":a,attrs:xt,content:ie}},ar=function(t){const e=ur(t),n=_(e,"tag-name"),r=_(e,"attrs"),o=_(e,"content"),s=_(r,"value"),c=dt(r,"value"),u=Bt,a=n==="svg"?"http://www.w3.org/2000/svg":u,l=document.createElementNS(a,n);return(()=>{try{Bt=a,cr(l,c);for(let f of p(o)){const g=B(f);if(i(g)){const v=g;l.appendChild(v)}}if(i(H(s)))if(i((()=>{const f=l.tagName==="SELECT";return f&&l.multiple})())){const f=Ot(s);for(let h of p(l.options)){const g=h;g.selected=ft(f,g.value)}}else l.value=s;return l}finally{Bt=u}})()},lr=function(t){const e=t._eucalypt_id;if(i(e))return e;{const n=k("fn_",xe());return t._eucalypt_id=n,n}},oe=function(t){if(d("normalize-component called with:",t),d("normalize-component: component metadata:",At(t)),i(et(t))){const e=b(t),n=K(t);if(i(st(e))){const r=e,o=M(n),s=At(t),c=lr(r),u=i(ft(s,"key"))?k(c,"_key_",_(s,"key")):k(c,"_pos_",y(rt,Et)),a=c,l=_(m(at),u),f=_(m(at),a);if(i(l))return d("normalize-component: using cached instance for key:",u),O([_(l,"instance")],o);if(i(f))return d("normalize-component: using cached shared for key:",a),O([_(f,"instance")],o);{d("normalize-component: cache miss for keys:",u,"and",a);const h=Gt(r,o);if(i(st(h))){const v=Ht(gt,{"reagent-render":h}),S=O([v],o);return d("normalize-component: Form-2, caching with key:",u),y(at,w,u,{type:"form-2",instance:v}),S}else{const g=Ht(gt,{"reagent-render":r}),v=O([g],o);return d("normalize-component: Form-1, caching with key:",a),y(at,w,a,{type:"form-1",instance:g}),v}}}else{if(i(N(e)))return O([w(gt,"reagent-render",(function(){return t}))],n);if(i(X(e))){const r=e,o=_(r,"reagent-render"),s=O({"reagent-render":o},ct((function(c){const u=c,a=A(u,0,null),l=A(u,1,null),f=_(r,a),h=i(f)?Ze(f,l):l;return[a,h]}),gt));return O([s],n)}else return null}}},se=function(t){const n=G(t),r=b(n),o=tt(n),s=r,c=o,u=_(s,"reagent-render");d("component->hiccup: calling reagent-render with params:",c);const a=Gt(u,c);return d("component->hiccup: reagent-render returned:",a),a},B=function(t){d("hiccup->dom called with:",t);const e=i((()=>{const n=N(t);return i(n)?n:Re(t)})())?document.createTextNode(k(t)):i(P(t))?(()=>{const r=G(t),o=b(r);tt(r);const s=o;if(i(st(s)))return B(se(oe(t)));if(i(P(s))){const c=document.createDocumentFragment();for(let u of p(t)){const l=B(u);if(i(l)){const f=l;c.appendChild(f)}}return c}else if(s==="<>"){const c=document.createDocumentFragment();for(let u of p(K(t))){const l=B(u);if(i(l)){const f=l;c.appendChild(f)}}return c}else return ar(t)})():i(te(t))?(()=>{const n=document.createDocumentFragment();for(let r of p(t)){const o=r,s=i((()=>{const u=P(o);return i(u)?At(o):u})())?Sn(o,At(o)):o,c=B(s);if(i(c)){const u=c;n.appendChild(u)}}return n})():i(st(t))?B(t()):i(X(t))?B(_(t,"reagent-render")()):i((()=>{const n=t==null;return n||In(t)})())?null:document.createTextNode(k(t));return d("hiccup->dom returning:",e),e},fr=function(t,e){const n=nr(t,e);return d("hiccup-eq?:",n),I(n)&&d("hiccup-eq? details: a:",t,"b:",e),n},he=function(t){d("is-sequence-of-hiccup-elements? checking:",t);const e=(()=>{const n=et(t);if(i(n)){const r=I(N(t));if(r){const o=G(t);return i(o)?wn((function(s){const c=s==null;return c||P(s)}),t):o}else return r}else return n})();return d("is-sequence-of-hiccup-elements? result:",e),e},Vt=function(t){const e=K(t);return i(X(b(e)))?K(e):e},Q=function(t){d("fully-render-hiccup called with:",t);const e=t==null?null:i(st(t))?Q(t()):i(he(t))||i((()=>{const n=H(t[Symbol.iterator]);if(i(n)){const r=I(P(t));return r&&I(N(t))}else return n})())?Ut(Q,t):i(P(t))?(()=>{const n=b(t);if(i(st(n)))return Q(se(oe(t)));{const r=i(X($t(t)))?$t(t):null,o=i(r)?vn(2,t):K(t),s=i(r)?[b(t),r]:[b(t)];return O(s,Te((function(c,u){const a=Q(u);if(d("fully-render-hiccup reduce: processing child, processed=",a),i((()=>{const l=et(a);if(i(l)){const f=I(N(a));return f&&bt(a)}else return l})()))return c;{const l=he(a);return d("fully-render-hiccup reduce: is-sequence-of-hiccup-elements?=",l),i((()=>{const f=P(a);return i(f)?b(a)==="<>":f})())?(d("fully-render-hiccup reduce: unpacking fragment"),O(c,Vt(a))):i(l)?(d("fully-render-hiccup reduce: unpacking sequence of hiccup elements"),O(c,a)):(d("fully-render-hiccup reduce: appending single child"),Mt(c,a))}}),[],o))}})():i(X(t))?Q(_(t,"reagent-render")()):t;return d("fully-render-hiccup returning:",e),e},ce=function(t){if(i(t)){const e=t["---ref-fn"];if(i(e)){const n=e;d("unmount-node-and-children: calling ref-fn for node",t),n(null),t["---ref-fn"]=null}for(let n of p(M(t.childNodes)))ce(n);return null}},Le=function(t){if(i(t))return ce(t),t.remove()},$e=function(t,e,n){d("--- patch-children start for dom:",n.toString());const r=M(z(ot,Vt(t))),o=M(z(ot,Vt(e))),s=$(M(n.childNodes)),c=Z(r),u=Z(o),a=Z(m(s));d("patch-children: len-a:",c,"len-b:",u,"len-dom:",a),d("patch-children: children-a:",r),d("patch-children: children-b:",o);let l=0;for(;;){if(l<jn(c,u)){const f=A(r,l),h=A(o,l),g=A(m(s),l),v=Ke(f,h,g);i(L(g,v))&&y(s,w,l,v),l=l+1;continue}break}if(u>c)for(let f of p(Se(c,u))){const h=f;n.appendChild(B(A(o,h)))}if(c>u){const f=c-u;let h=0;for(;;){if(h<f){Le(n.lastChild),h=h+1;continue}break}}},Tt=function(t){d("get-attrs called on hiccup:",t);const e=$t(t);return i(X(e))?e:{}},_r=function(t,e,n){d("patch-attributes called with hiccup-a:",t,"hiccup-b:",e);const r=Tt(t),o=Tt(e),s=_(r,"ref"),c=_(o,"ref"),u=n.tagName;d("patch-attributes: a-attrs:",r,"b-attrs:",o),d("patch-attributes: a-ref:",s,"b-ref:",c),d("patch-attributes: about to compare refs. are they equal?",s===c,"a-ref:",s,"b-ref:",c),s!==c&&(d("patch-attributes: refs are different, handling lifecycle"),i(s)&&s(null),i(c)&&c(n),n["---ref-fn"]=c);for(let a of p(r)){const l=a,f=A(l,0,null);A(l,1,null),i((()=>{const h=I(ft(o,f));if(h){const g=L(f,"ref");return i(g)?L(f,"xmlns"):g}else return h})())&&(i(f.startsWith("on-"))?n[Yt(f,u)]=null:n.removeAttribute(f))}for(let a of p(o)){const l=a,f=A(l,0,null),h=A(l,1,null);if(i((()=>{const g=L(f,"ref");return i(g)?L(f,"xmlns"):g})())){const g=_(r,f);if(i(f.startsWith("on-")))n[Yt(f,u)]=h;else if(i(L(h,g))&&(d("patch-attributes: updating attribute",f,"from",g,"to",h,"on",n),f!=="value"))if(f==="class"){const v=i((()=>{const S=et(h);return i(S)?I(N(h)):S})())?M(z(ot,h)).join(" "):h;i((()=>{const S=v==null;return S||v===""})())?n.removeAttribute("class"):n.setAttribute("class",v)}else if(i((()=>{const v=f==="checked";return v||f==="selected"})()))n[f]=h;else if(h==null)n.removeAttribute(f);else{const v=f==="style"?De(h):h;n.setAttributeNS(null,f,v)}}}return null},jt=function(t){return i((()=>{const e=te(t);return i(e)?t.gen:e})())?Ut(jt,t):i((()=>{const e=et(t);return i(e)?I(N(t)):e})())?O(re(t),ct(jt,t)):t},Ke=function(t,e,n){d("patch: hiccup-a-rendered",t,"hiccup-b-rendered",e,"dom-a",n.toString());const r=jt(t),o=jt(e),s=fr(r,o);if(d("patch: are-equal is",s,"(type",typeof s,")"),i(s))return d("patch: hiccup is equal, doing nothing"),n;if(i((()=>{const c=I(P(r));if(c)return c;{const u=I(P(o));return u||L(b(r),b(o))}})())){const c=B(o);return d("patch: replacing node. dom-a:",n,"new-node:",c),i(n)&&d("patch: replacing node. dom-a.textContent:",n.textContent,"new-node.textContent:",c.textContent),ce(n),n.replaceWith(c),c}else{d("patch: hiccup not equal, patching children and attributes"),_r(r,o,n),$e(r,o,n);const c=Tt(r),u=Tt(o),a=_(u,"value");if(i((()=>{const l=ft(u,"value");return i(l)?L(_(c,"value"),a):l})()))if(d("patch: value changed from",_(c,"value"),"to",a,"on",n),i((()=>{const l=n.tagName==="SELECT";return l&&n.multiple})())){const l=Ot(a);for(let f of p(n.options)){const h=f;h.selected=ft(l,h.value)}}else n.value=a;return n}},dr=function(t){d("modify-dom called for component:",t),ze(t),j(rt,0);const e=_(m(yt),t);d("modify-dom: mounted-info from cache:",e);const n=e,r=_(n,"hiccup"),o=_(n,"dom"),s=_(n,"container"),c=Pe(t,(function(){return se(t)})),u=Q(c);if(i((()=>{const a=P(r);return i(a)?b(r)==="<>":a})()))return j(rt,0),$e(r,u,s),y(yt,w,t,{hiccup:u,dom:o,container:s});{j(rt,0);const a=Ke(r,u,o);if(d("modify-dom: new DOM",a),y(yt,w,t,{hiccup:u,dom:a,container:s}),i(L(o,a)))return d("modify-dom: DOM changed, replacing in container"),s.innerHTML="",s.appendChild(a)}},pe=function(t){d("notify-watchers called with",Z(m(t)),"watchers");for(let e of p(m(t))){const n=e;d("calling watcher");const r=W;try{W=n,n()}finally{W=r}}return null},hr=function(t){return Pe(t,(function(){const e=_(b(t),"reagent-render"),n=K(t),r=Gt(e,n),o=B(r);return[r,o]}))},pr=function(t){const e=_(m(Wt),t);if(i(e)){const n=e;ze(n);const o=G(n),s=b(o);tt(o),_(s,"component-will-unmount")(n),y(Wt,dt,t)}j(at,{});for(let n of p(M(t.childNodes)))Le(n);return null},mr=function(t,e){pr(e),j(rt,0);const r=G(t),o=b(r);tt(r),_(o,"_reagent-render");const c=hr(t),u=A(c,0,null),a=A(c,1,null);j(rt,0);const l=Q(u);return e.appendChild(a),y(yt,w,t,{hiccup:l,dom:a,container:e}),y(Wt,w,e,t)},gr=function(t){const e=$(t),n=e._deref,r=e._reset_BANG_,o=k("ratom-",xe());return e["ratom-id"]=o,e.watchers=$(new Set([])),e.cursors=$(new Set([])),e._deref=(function(){return i(W)&&(d("ratom deref: watcher found, adding to set."),y(e.watchers,Mt,W)),n.call(e)}),e._reset_BANG_=(function(s){d("ratom _reset_BANG_ called with",s);const c=r.call(e,s);pe(e.watchers);for(let u of p(m(e.cursors)))pe(u.watchers);return c}),y(Be,w,o,e),e},vr=function(t,e){d("render called with component:",t,"and container:",e);const n=oe(t);return d("render: normalized-component is",n),mr(n,e)},q=gr;function Fe(t,e){if(e===void 0&&(e=t,t=""),e instanceof Array)return e.join(t);let n="",r=!1;for(const o of p(e))r&&(n+=t),n+=o,r=!0;return n}function yr(t){return t.trim()}function wr(t,e){if(e.length>1)for(;e[e.length-1]==="";)e.pop();return e}function br(t,e,n){const r=t.split(e,n);return wr(n,r)}const Ar=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},me=function(t,e,n){var r="g";e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u");const o=new RegExp(e.source,r);return t.replace(o,n)},Tr=function(t){return(...e)=>{const[n,r,o]=e;return n.length==1?t(n[0]):t(n)}};function ge(t,e,n){if(N(e))return t.replace(new RegExp(Ar(e),"g"),n);if(e instanceof RegExp)return N(n)?me(t,e,n):me(t,e,Tr(n));throw"Invalid match arg: $match"}console.log("main.cljs loading...");var T=q({page:"home",counter:0,timer:0,coins:99,showfrag:!1,"text-input":"","page-size":"loading...",slots:M(mn(15,null))}),Ue=q(new Date),Xt=q("#f34");setInterval((function(){return j(Ue,new Date)}),1e3);var jr=function(){return fetch(location.href).then((function(t){const e=t.headers,n=e.get("content-encoding")==="gzip",r=e.get("content-length");if(i((()=>{const o=n;return o&&r})())){const o=parseInt(r)/1024;return y(T,w,"page-size",k(o.toFixed(1),"kb gzipped"))}else return t.text().then((function(o){const s=o.length/1024;return y(T,w,"page-size",k(s.toFixed(1),"kb"))}))})).catch((function(t){return console.error("Error fetching page size:",t),y(T,w,"page-size","Error")}))},kr=function(t){if(i(t))return Fe(`
`,ct((function(e){const n=ge(e,/\[(.*?)\]\((.*?)\)/,'<a href="$2">$1</a>');return i(mt(/^# /,e))?k("<h1>",ge(e,/^# /,""),"</h1>"):i(mt(/^- /,e))?k(n,`</br>
`):i(mt(/docs\/eucalypt.svg/,e))?e.replace("docs/",""):i(mt(/\[.*?\]\(.*?\)/,e))?n:k("<p>",e,"</p>")}),t.split(`

`)))},C=function(t,e){return["a",{href:"#",class:"nav-link","on-click":(function(n){return n.preventDefault(),y(T,w,"page",t)})},e]},Sr=function(){return["div",["h1","Eucalypt demos"],["p","These demos are compiled into this single HTML file artifact."],["p","It has a file size of ",["strong",_(m(T),"page-size")],"."],["p","See ",["a",{href:"small.html"},"small.html"]," for the smallest possible artifact of around 9kb."],["p","Visit the ",["a",{href:"https://github.com/chr15m/eucalypt"},"GitHub project"]," for info on installing and using Eucalypt."],["section",{ref:(function(t){if(i(t)){const n=Mn.split("\x3C!-- end-about -->"),r=b(n),o=kr(r);return t.innerHTML=o}})}],["hr"],["p","Counter demo: ",_(m(T),"counter")],["button",{"on-click":(function(t){return y(T,Nt,"counter",Et)})},"Increment"]]},Ir=function(){return["div",["h1","Text Input Page"],["p","The current text is: ",_(m(T),"text-input")],["input",{type:"text",value:_(m(T),"text-input"),"on-input":(function(t){return y(T,w,"text-input",t.target.value)})}],["p","This is some text after the input to test rendering."]]},Mr=function(){return["svg",{stroke:"currentColor",fill:"none","stroke-linejoin":"round",width:"24",xmlns:"http://www.w3.org/2000/svg","stroke-linecap":"round","stroke-width":"2",class:"icon",viewBox:"0 0 24 24",height:"24"},["path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}],["path",{d:"M16 4a1 1 0 1 0 2 0a1 1 0 0 0 -2 0"}],["path",{d:"M5.5 15h3.5l.75 -1.5"}],["path",{d:"M14 19v-5l-2.5 -3l2.5 -4"}],["path",{d:"M8 8l3 -1h4l1 3h3"}],["path",{d:"M17.5 21a.5 .5 0 1 0 0 -1a.5 .5 0 0 0 0 1z",fill:"currentColor"}],["path",{d:"M3 18c0 .552 .895 1 2 1h14c1.105 0 2 -.448 2 -1"}],["path",{d:"M6.5 21a.5 .5 0 1 0 0 -1a.5 .5 0 0 0 0 1z",fill:"currentColor"}]]},Er=function(){return["div",["h1","SVG Test Page"],[Mr]]},Pt=function(t,e,n,r,o,s,c,u){return["input",{type:"range",value:r,min:o,max:s,step:c,class:"slider","on-input":(function(a){console.log("slider on-input fired",a);const l=parseFloat(a.target.value);return y(t,(function(f){return e(dt(w(f,n,l),u))}))})}]},zt=function(t){const e=t,n=e,r=_(e,"voltage"),o=_(e,"current"),s=_(e,"resistance");return r==null?w(n,"voltage",o*s):w(n,"current",r/s)},vt=q({voltage:12,current:.5,resistance:24}),Or=function(){const t=m(vt),e=_(t,"voltage"),n=_(t,"current"),r=_(t,"resistance");return["div",["h3","Ohm's Law Calculator"],["div","Voltage: ",e.toFixed(2),"V",[Pt,vt,zt,"voltage",e,0,30,.1,"current"]],["div","Current: ",n.toFixed(2),"A",[Pt,vt,zt,"current",n,0,3,.01,"voltage"]],["div","Resistance: ",r.toFixed(2),"Ω",[Pt,vt,zt,"resistance",r,0,100,1,"voltage"]]]},Qe=function(){return["div",["p","I am a component!"],["p",{class:"someclass"},"I have ",["strong","bold"],["span",{class:"text-red"}," and red "],"text."]]},Gr=function(){return["div",["p","I include simple-component."],[Qe]]},Rr=function(t){return["p","Hello, ",t,"!"]},Nr=function(){return[Rr,"world"]},Cr=function(t){return["ul",R(function*(){for(let e of p(t))yield["li","Item ",e]})]},xr=function(){return["div","Here is a list:",[Cr,Se(3)]]},qr=function(){return["div#main.container",["h1.title","Decorated Component"],["p","This component uses ID and class decorators."]]},Br=function(){return["div",["h1","Basic Tests"],["h2","simple-component"],[Qe],["hr"],["h2","simple-parent"],[Gr],["hr"],["h2","say-hello (hello-component)"],[Nr],["hr"],["h2","lister-user (lister)"],[xr],["hr"],["h2","Decorated Component"],[qr]]},Pr=function(){return console.log("ref-test-page render fn called"),["div",{ref:(function(t){return console.log("ref-test-page :ref fn called with el:",t)})},["h1","Ref Test Page"],["p",{ref:(function(t){if(i(t))return t.style["background-color"]="pink"})},"Original text that gets replaced."],["p","Check the console to see the :ref function getting called."]]},zr=(()=>{const t=ke(null),e=(function(n){if(console.log("timer-page :ref fn called with el:",n,"and interval-id:",m(t)),i(n)){if(m(t)==null)return console.log("Timer :ref mount, starting timer."),j(t,setInterval((function(){return y(T,Nt,"timer",Et)}),1e3))}else if(i(m(t)))return console.log("Timer :ref unmount, clearing timer."),clearInterval(m(t)),j(t,null)});return console.log("timer-page component defined, interval-id atom created:",t),function(){return console.log("timer-page render fn called, interval-id is:",m(t)),["div",{ref:e},["h1","Timer Page"],["p","The timer increments every second only while on this tab."],["p","The current timer is: ",_(m(T),"timer")]]}})(),Dt=q([]),Dr=function(){return["div",["h1","List Demo"],["button",{"on-click":(function(t){return y(Dt,Mt,Math.random())})},"+ Add"],["ul",R(function*(){for(let t of p(m(Dt))){const e=t;yield["li",e," ",["button",{"on-click":(function(n){return y(Dt,(function(r){return M(z((function(o){return o===e}),r))}))})},"x"]]}})]]},F=q({}),He=q(0),wt=function(t){const e=y(He,Et);return y(F,w,e,{id:e,title:t,done:!1})},Lr=function(t){return y(F,yn,[t,"done"],I)},$r=function(t,e){return y(F,_t,[t,"title"],e)},Kr=function(t){return y(F,dt,t)},We=function(t,e,n){return O(re(t),e(n,t))},Fr=function(t){return y(F,We,ct,(function(e){return _t(e,[1,"done"],t)}))},Ur=function(){return y(F,We,z,(function(t){return Oe(t,[1,"done"])}))},Ye=function(t){const e=t,n=_(e,"title"),r=_(e,"on-save"),o=_(e,"on-stop"),s=q((()=>{const c=n;return i(c)?c:""})());return function(c){const u=(function(l){if(j(s,""),i(o))return o()}),a=(function(l){const f=yr(k(m(s)));return i(bt(f))||r(f),u()});return["input",Ht({type:"text",value:m(s),"on-blur":a,"on-change":(function(l){return j(s,l.target.value)}),"on-key-down":(function(l){switch(l.code){case"Enter":return a();case"Escape":return u()}})},fn(c,["id","class","placeholder","ref"]))]}},Qr=function(t){return[Ye,w(t,"ref",(function(e){if(i(e))return e.focus()}))]},Hr=function(t){const e=t,n=_(e,"filt"),r=_(e,"active"),o=_(e,"done"),s=(function(c){return{href:"#",class:c===m(n)?"selected":null,"on-click":(function(u){return u.preventDefault(),j(n,c)})}});return["div",["span",{id:"todo-count"},["strong",r]," ",(()=>{switch(r){case 1:return"item";default:return"items"}})()," left"],["ul",{id:"filters"},["li",["a",s("all"),"All"]],["li",["a",s("active"),"Active"]],["li",["a",s("done"),"Completed"]]],o>0?["button",{id:"clear-completed","on-click":Ur},"Clear completed ",o]:null]},Wr=function(){const t=q(!1);return function(e){const n=e,r=_(n,"id"),o=_(n,"done"),s=_(n,"title");return["li",{class:Fe(" ",z(ot,[i(o)?"completed":null,i(m(t))?"editing":null]))},["div",{class:"view"},["input",{class:"toggle",type:"checkbox",checked:o,"on-change":(function(){return Lr(r)})}],["label",{"on-double-click":(function(){return j(t,!0)})},s],["button",{class:"destroy","on-click":(function(){return Kr(r)})},"X"]],i(m(t))?[Qr,{class:"edit",title:s,"on-save":(function(c){return $r(r,c)}),"on-stop":(function(){return j(t,!1)})}]:null]}},Yr=function(){const t=q("all");return function(){const e=An("id",kn(m(F))),n=Z(Ft("done",e)),r=Z(e)-n;return["div",["section",{id:"todoapp"},["header",{id:"header"},["h1","todos"],[Ye,{id:"new-todo",placeholder:"What needs to be done?","on-save":wt}]],i(G(e))?["div",["section",{id:"main"},["p",["input",{id:"toggle-all",type:"checkbox",checked:r===0,"on-change":(function(){return Fr(r>0)})}],["label",{for:"toggle-all"},"Mark all as complete"]],["ul",{id:"todo-list"},R(function*(){for(let o of p(Ft((()=>{const s=m(t);switch(s){case"active":return Qt("done");case"done":return"done";case"all":return nt;default:throw new Error(k("No matching clause: ",s))}})(),e)))yield[Wr,o]})]],["footer",{id:"footer"},[Hr,{active:r,done:n,filt:t}]]]:null],["footer",{id:"info"},["p","Double-click to edit a todo"]]]}},Vr=function(){return j(F,{}),j(He,0),wt("one"),wt("two"),wt("three"),y(F,_t,[2,"done"],!0)},Xr=function(t){return["h1",t]},Jr=function(){const t=b(br(m(Ue).toTimeString()," "));return["div",{style:{color:m(Xt),"font-size":"2em","font-family":"monospace"}},t]},Zr=function(){return["div","Time color: ",["input",{type:"text",value:m(Xt),"on-input":(function(t){return j(Xt,t.target.value)})}]]},Lt=function(t,e,n,r){return["line",{x1:50,y1:50,x2:50+e*Math.sin(Math.PI*t/180),y2:50-e*Math.cos(Math.PI*t/180),stroke:r,"stroke-width":n,"stroke-linecap":"round"}]},to=function(){const t=q(new Date);return setInterval((function(){return j(t,new Date)}),1e3),function(){const e=m(t),n=30*(e.getHours()+e.getMinutes()/60),r=6*e.getMinutes(),o=6*e.getSeconds();return["svg",{width:200,height:200,viewBox:"0 0 100 100"},["circle",{cx:50,cy:50,r:48,fill:"#fff",stroke:"#000"}],[Lt,n,25,3,"black"],[Lt,r,35,2,"blue"],[Lt,o,40,1,"red"],["circle",{cx:50,cy:50,r:1.5,fill:"#000"}]]}},eo=function(){return["div",[Xr,"Hello world, it is now"],[Jr],[Zr],["p","Borkdude SVG clock:"],[to]]},no=function(){return["div",{class:"hud"},"🪙 ",_(m(T),"coins")]},ro=function(){return y(T,(function(t){const e=_(t,"coins"),n=_(t,"slots");if(i((()=>{const r=e>0;return r&&Tn(ot,n)})())){const r=n.indexOf(null);return _t(Nt(t,"coins",tn),["slots",r],"🪙")}else return t}))},oo=function(){return["<>",[no],i(_(m(T),"showfrag"))?["div","Hidden"]:["section",{class:"slide big",style:{cursor:"pointer"},"on-click":ro},["div",{class:"slots"},(()=>{const t=_(m(T),"slots"),n=hn(5,t);return ae((function(r,o){return["div",{class:"slot-row",key:r},(()=>{const s=M(o),u=(Z(s)-1)/2;return ae((function(a,l){const f=Math.abs(a-u),h=f*f*.2,g={transform:k("translateY(",h,"em)")};return i(l)?["span",{class:"emoji filled",style:g,key:a},l]:["span",{class:"emoji",style:g,key:a},"⚪"]}),s)})()]}),n)})()]],["button",{"on-click":(function(){return y(T,Nt,"showfrag",I)})},i(_(m(T),"showfrag"))?"Show":"Hide"]]},so=function(){const t=_(m(T),"page");return["div",["nav",[C,"home","Home"],[C,"basic-tests","Basic Tests"],[C,"text-input","Text Input"],[C,"timer","Timer"],[C,"ref-test","Ref Test"],[C,"svg","SVG"],[C,"list-demo","List Demo"],[C,"todomvc","TodoMVC"],[C,"fragments","Fragments"],[C,"clock","Clock Demo"],[C,"ohms","Ohm's Law"]],["hr",{class:"separator"}],(()=>{switch(t){case"home":return[Sr];case"basic-tests":return[Br];case"text-input":return[Ir];case"timer":return[zr];case"ref-test":return[Pr];case"svg":return[Er];case"list-demo":return[Dr];case"todomvc":return[Yr];case"ohms":return[Or];case"fragments":return[oo];case"clock":return[eo];default:return["div","Page not found"]}})(),["p",["a",{href:"https://github.com/chr15m/eucalypt"},"Eucalypt on GitHub"]]]};console.log("main.cljs: about to call render!");vr([so],document.getElementById("app"));jr();Vr();console.log("main.cljs: render! finished");</script>
  <style rel="stylesheet" crossorigin>body{font-family:sans-serif;background-color:#f0f0f0;color:#333}div#app{max-width:800px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a}h1{color:#111}a{color:#007bff;text-decoration:none}a:hover{text-decoration:underline}button{padding:10px 15px;font-size:1rem;border-radius:5px;border:1px solid #ccc;cursor:pointer;background-color:#eee}button:hover{background-color:#ddd}.nav-link{margin-right:.5em}.nav-link+.nav-link{border-left:2px solid #ccc;padding-left:.5em}.slider{width:100%}.text-red{color:red}.separator{margin:1rem 0}.color-orange{color:orange}.color-red{color:red}#todo-list .view{display:flex;justify-content:start;align-items:center;border-bottom:1px solid silver}#todo-list .view label{flex-grow:1;margin-left:.5em}</style>
</head>
<body>
    <div id="app"><div class="loader"></div></div>
</body>
</html>
